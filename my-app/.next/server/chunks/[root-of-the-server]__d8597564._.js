module.exports=[23502,(e,r,t)=>{},97948,e=>{"use strict";var r=e.i(84540),t=e.i(89073),i=e.i(45130),o=e.i(7335),n=e.i(60400),s=e.i(81355),a=e.i(39866);let l="AWS_EC2_METADATA_DISABLED",c=async r=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:i,fromContainerMetadata:o,fromInstanceMetadata:s}=await e.A(14277);if(process.env[i]||process.env[t]){r.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:t}=await e.A(93306);return(0,a.chain)(t(r),o(r))}return process.env[l]&&"false"!==process.env[l]?async()=>{throw new n.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:r.logger})}:(r.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),s(r))},d=!1,u=e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5;var f=e.i(10334),h=e.i(77524),g=e.i(15189);class p{credentials;hostname;protocol="https:";region;service="dsql";sha256;expiresIn;constructor(r){const t=(r=>({runtime:"node",sha256:r?.sha256??h.Hash.bind(null,"sha256"),credentials:r?.credentials??((r={})=>((r={})=>{let t,i,a,l,f,h;return h=[async()=>{if(r.profile??process.env[s.ENV_PROFILE])throw process.env[o.ENV_KEY]&&process.env[o.ENV_SECRET]&&!d&&((r.logger?.warn&&r.logger?.constructor?.name!=="NoOpLogger"?r.logger.warn.bind(r.logger):console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),d=!0),new n.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:r.logger,tryNextLink:!0});return r.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),(0,o.fromEnv)(r)()},async t=>{r.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:i,ssoAccountId:o,ssoRegion:s,ssoRoleName:a,ssoSession:l}=r;if(!i&&!o&&!s&&!a&&!l)throw new n.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:r.logger});let{fromSSO:c}=await e.A(14115);return c(r)(t)},async t=>{r.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:i}=await e.A(9193);return i(r)(t)},async t=>{r.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:i}=await e.A(85365);return i(r)(t)},async t=>{r.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:i}=await e.A(52170);return i(r)(t)},async()=>(r.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await c(r))()),async()=>{throw new n.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:r.logger})}],l=async e=>{let r;for(let t of h)try{return await t(e)}catch(e){if(r=e,e?.tryNextLink)continue;throw e}throw r},f=async e=>{if(e?.forceRefresh)return await l(e);if(a?.expiration&&a?.expiration?.getTime()<Date.now()&&(a=void 0),t)await t;else if(!a||u?.(a))if(!a)return t=l(e).then(e=>{a=e,t=void 0}),f(e);else i||(i=l(e).then(e=>{a=e,i=void 0}));return a}})({...r}))(),region:r?.region??(0,g.loadConfig)(f.NODE_REGION_CONFIG_OPTIONS,f.NODE_REGION_CONFIG_FILE_OPTIONS),...r}))(r);this.credentials=t.credentials,this.hostname=t.hostname,this.region=t.region,this.sha256=t.sha256,this.expiresIn=t.expiresIn??900}async _getAuthToken(e){let o=new i.SignatureV4({service:this.service,region:this.region,credentials:this.credentials,sha256:this.sha256}),n=new t.HttpRequest({method:"GET",protocol:this.protocol,hostname:this.hostname,query:{Action:e},headers:{host:`${this.hostname}`}});return(function(e){let{port:t,query:i}=e,{protocol:o,path:n,hostname:s}=e;o&&":"!==o.slice(-1)&&(o+=":"),t&&(s+=`:${t}`),n&&"/"!==n.charAt(0)&&(n=`/${n}`);let a=i?(0,r.buildQueryString)(i):"";a&&"?"!==a[0]&&(a=`?${a}`);let l="";if(null!=e.username||null!=e.password){let r=e.username??"",t=e.password??"";l=`${r}:${t}@`}let c="";return e.fragment&&(c=`#${e.fragment}`),`${o}//${l}${s}${n}${a}${c}`})(await o.presign(n,{expiresIn:this.expiresIn})).replace(`${this.protocol}//`,"")}async getDbConnectAuthToken(){return this._getAuthToken("DbConnect")}async getDbConnectAdminAuthToken(){return this._getAuthToken("DbConnectAdmin")}}e.s(["DsqlSigner",()=>p],97948)},30056,e=>e.a(async(r,t)=>{try{let r=await e.y("pg");e.n(r),t()}catch(e){t(e)}},!0),86174,e=>e.a(async(r,t)=>{try{e.i(23502);var i=e.i(97948),o=e.i(30056),n=r([o]);[o]=n.then?(await n)():n;let{AURORA_DSQL_HOST:c,AURORA_DSQL_PORT:d,AURORA_DSQL_REGION:u,AURORA_DSQL_DB:f,AURORA_DSQL_USER:h}=process.env,g=null;async function s(){let e=Date.now();if(g&&g.expiresAt>e)return g.token;let r=new i.DsqlSigner({hostname:c,region:u,credentials:{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY}}),t=await r.getDbConnectAdminAuthToken();return g={token:t,expiresAt:e+6e5},t}let p=null;async function a(){if(!p){let e=await s();p=new o.Pool({host:c,port:Number(d??5432),user:h,password:e,database:f,ssl:{rejectUnauthorized:!0},max:20,idleTimeoutMillis:3e4,connectionTimeoutMillis:2e3}),setInterval(async()=>{try{let e=await s();p&&(await p.end(),p=new o.Pool({host:c,port:Number(d??5432),user:h,password:e,database:f,ssl:{rejectUnauthorized:!0},max:20,idleTimeoutMillis:3e4,connectionTimeoutMillis:2e3}))}catch(e){console.error("[getAurora] Token refresh failed:",e)}},54e4)}return p}async function l(){let e=await s(),r=new o.Client({host:c,port:Number(d??5432),user:h,password:e,database:f,ssl:{rejectUnauthorized:!0}});return await r.connect(),r}e.s(["getDb",()=>l,"getPool",()=>a]),t()}catch(e){t(e)}},!1),39866,e=>{"use strict";var r=e.i(48979);e.s(["chain",0,(...e)=>async()=>{let t;if(0===e.length)throw new r.ProviderError("No providers in chain");for(let r of e)try{return await r()}catch(e){if(t=e,e?.tryNextLink)continue;throw e}throw t}])},89073,e=>{"use strict";class r{method;protocol;hostname;port;path;query;headers;username;password;fragment;body;constructor(e){this.method=e.method||"GET",this.hostname=e.hostname||"localhost",this.port=e.port,this.query=e.query||{},this.headers=e.headers||{},this.body=e.body,this.protocol=e.protocol?":"!==e.protocol.slice(-1)?`${e.protocol}:`:e.protocol:"https:",this.path=e.path?"/"!==e.path.charAt(0)?`/${e.path}`:e.path:"/",this.username=e.username,this.password=e.password,this.fragment=e.fragment}static clone(e){var t;let i=new r({...e,headers:{...e.headers}});return i.query&&(i.query=Object.keys(t=i.query).reduce((e,r)=>{let i=t[r];return{...e,[r]:Array.isArray(i)?[...i]:i}},{})),i}static isInstance(e){return!!e&&"method"in e&&"protocol"in e&&"hostname"in e&&"path"in e&&"object"==typeof e.query&&"object"==typeof e.headers}clone(){return r.clone(this)}}e.s(["HttpRequest",()=>r])},874,(e,r,t)=>{r.exports=e.x("buffer",()=>require("buffer"))},55103,34036,47797,e=>{"use strict";let r=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e);e.s(["isArrayBuffer",0,r],34036);var t=e.i(874);let i=(e,r)=>{if("string"!=typeof e)throw TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return r?t.Buffer.from(e,r):t.Buffer.from(e)};e.s(["fromArrayBuffer",0,(e,i=0,o=e.byteLength-i)=>{if(!r(e))throw TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return t.Buffer.from(e,i,o)},"fromString",0,i],47797),e.s(["fromUtf8",0,e=>{let r=i(e,"utf8");return new Uint8Array(r.buffer,r.byteOffset,r.byteLength/Uint8Array.BYTES_PER_ELEMENT)}],55103)},84540,12623,e=>{"use strict";let r=e=>encodeURIComponent(e).replace(/[!'()*]/g,t),t=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;function i(e){let t=[];for(let i of Object.keys(e).sort()){let o=e[i];if(i=r(i),Array.isArray(o))for(let e=0,n=o.length;e<n;e++)t.push(`${i}=${r(o[e])}`);else{let e=i;(o||"string"==typeof o)&&(e+=`=${r(o)}`),t.push(e)}}return t.join("&")}e.s(["escapeUri",0,r],12623),e.s(["buildQueryString",()=>i],84540)},83784,e=>{"use strict";let r={},t={};for(let e=0;e<256;e++){let i=e.toString(16).toLowerCase();1===i.length&&(i=`0${i}`),r[e]=i,t[i]=e}function i(e){if(e.length%2!=0)throw Error("Hex encoded strings must have an even number length");let r=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2){let o=e.slice(i,i+2).toLowerCase();if(o in t)r[i/2]=t[o];else throw Error(`Cannot decode unrecognized sequence ${o} as hexadecimal`)}return r}function o(e){let t="";for(let i=0;i<e.byteLength;i++)t+=r[e[i]];return t}e.s(["fromHex",()=>i,"toHex",()=>o])},54799,(e,r,t)=>{r.exports=e.x("crypto",()=>require("crypto"))},60400,48979,e=>{"use strict";class r extends Error{name="ProviderError";tryNextLink;constructor(e,t=!0){let i,o=!0;"boolean"==typeof t?(i=void 0,o=t):null!=t&&"object"==typeof t&&(i=t.logger,o=t.tryNextLink??!0),super(e),this.tryNextLink=o,Object.setPrototypeOf(this,r.prototype),i?.debug?.(`@smithy/property-provider ${o?"->":"(!)"} ${e}`)}static from(e,r=!0){return Object.assign(new this(e.message,r),e)}}e.s(["ProviderError",()=>r],48979);class t extends r{name="CredentialsProviderError";constructor(e,r=!0){super(e,r),Object.setPrototypeOf(this,t.prototype)}}e.s(["CredentialsProviderError",()=>t],60400)},9212,e=>{"use strict";function r(e,r,t){return e.$source||(e.$source={}),e.$source[r]=t,e}e.s(["setCredentialFeature",()=>r])},14747,(e,r,t)=>{r.exports=e.x("path",()=>require("path"))},46786,(e,r,t)=>{r.exports=e.x("os",()=>require("os"))},12714,(e,r,t)=>{r.exports=e.x("node:fs/promises",()=>require("node:fs/promises"))},65790,49487,e=>{"use strict";var r=e.i(46786),t=e.i(14747);let i={};e.s(["getHomeDir",0,()=>{let{HOME:e,USERPROFILE:o,HOMEPATH:n,HOMEDRIVE:s=`C:${t.sep}`}=process.env;if(e)return e;if(o)return o;if(n)return`${s}${n}`;let a=process&&process.geteuid?`${process.geteuid()}`:"DEFAULT";return i[a]||(i[a]=(0,r.homedir)()),i[a]}],65790);var o=e.i(12714);let n={},s={};e.s(["fileIntercept",0,s,"readFile",0,(e,r)=>void 0!==s[e]?s[e]:((!n[e]||r?.ignoreCache)&&(n[e]=(0,o.readFile)(e,"utf8")),n[e])],49487)},81355,e=>{"use strict";let r="AWS_PROFILE";e.s(["ENV_PROFILE",0,r,"getProfileName",0,e=>e.profile||process.env[r]||"default"])},96405,3289,e=>{"use strict";var r,t;(t=r||(r={})).PROFILE="profile",t.SSO_SESSION="sso-session",t.SERVICES="services",e.s(["IniSectionType",()=>r],96405),e.s(["CONFIG_PREFIX_SEPARATOR",0,"."],3289)},21334,e=>{"use strict";var r=e.i(96405),t=e.i(3289);e.s(["getConfigData",0,e=>Object.entries(e).filter(([e])=>{let i=e.indexOf(t.CONFIG_PREFIX_SEPARATOR);return -1!==i&&Object.values(r.IniSectionType).includes(e.substring(0,i))}).reduce((e,[i,o])=>{let n=i.indexOf(t.CONFIG_PREFIX_SEPARATOR);return e[i.substring(0,n)===r.IniSectionType.PROFILE?i.substring(n+1):i]=o,e},{...e.default&&{default:e.default}})])},92395,e=>{"use strict";var r=e.i(14747),t=e.i(65790);e.s(["getConfigFilepath",0,()=>process.env.AWS_CONFIG_FILE||(0,r.join)((0,t.getHomeDir)(),".aws","config")])},61487,e=>{"use strict";var r=e.i(14747),t=e.i(65790);e.s(["getCredentialsFilepath",0,()=>process.env.AWS_SHARED_CREDENTIALS_FILE||(0,r.join)((0,t.getHomeDir)(),".aws","credentials")])},7104,e=>{"use strict";var r=e.i(96405),t=e.i(3289);let i=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,o=["__proto__","profile __proto__"];e.s(["parseIni",0,e=>{let n,s,a={};for(let l of e.split(/\r?\n/)){let e=l.split(/(^|\s)[;#]/)[0].trim();if("["===e[0]&&"]"===e[e.length-1]){n=void 0,s=void 0;let a=e.substring(1,e.length-1),l=i.exec(a);if(l){let[,e,,i]=l;Object.values(r.IniSectionType).includes(e)&&(n=[e,i].join(t.CONFIG_PREFIX_SEPARATOR))}else n=a;if(o.includes(a))throw Error(`Found invalid profile name "${a}"`)}else if(n){let r=e.indexOf("=");if(![0,-1].includes(r)){let[i,o]=[e.substring(0,r).trim(),e.substring(r+1).trim()];if(""===o)s=i;else{s&&l.trimStart()===l&&(s=void 0),a[n]=a[n]||{};let e=s?[s,i].join(t.CONFIG_PREFIX_SEPARATOR):i;a[n][e]=o}}}}return a}])},46277,e=>{"use strict";var r=e.i(14747),t=e.i(21334),i=e.i(92395),o=e.i(61487),n=e.i(65790),s=e.i(7104),a=e.i(49487);let l=()=>({}),c=async(e={})=>{let{filepath:c=(0,o.getCredentialsFilepath)(),configFilepath:d=(0,i.getConfigFilepath)()}=e,u=(0,n.getHomeDir)(),f=c;c.startsWith("~/")&&(f=(0,r.join)(u,c.slice(2)));let h=d;d.startsWith("~/")&&(h=(0,r.join)(u,d.slice(2)));let g=await Promise.all([(0,a.readFile)(h,{ignoreCache:e.ignoreCache}).then(s.parseIni).then(t.getConfigData).catch(l),(0,a.readFile)(f,{ignoreCache:e.ignoreCache}).then(s.parseIni).catch(l)]);return{configFile:g[0],credentialsFile:g[1]}};e.s(["loadSharedConfigFiles",0,c])},15189,72783,e=>{"use strict";var r=e.i(39866);let t=(e,r,t)=>{let i,o,n,s=!1,a=async()=>{o||(o=e());try{i=await o,n=!0,s=!1}finally{o=void 0}return i};return void 0===r?async e=>((!n||e?.forceRefresh)&&(i=await a()),i):async e=>((!n||e?.forceRefresh)&&(i=await a()),s||(t&&!t(i)?s=!0:r(i)&&await a()),i)};e.s(["memoize",0,t],72783);var i=e.i(60400);function o(e){try{let r=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return r.delete("CONFIG"),r.delete("CONFIG_PREFIX_SEPARATOR"),r.delete("ENV"),[...r].join(", ")}catch(r){return e}}var n=e.i(81355),s=e.i(46277);e.s(["loadConfig",0,({environmentVariableSelector:e,configFileSelector:a,default:l},c={})=>{let d,{signingName:u,logger:f}=c;return t((0,r.chain)((d={signingName:u,logger:f},async()=>{try{let r=e(process.env,d);if(void 0===r)throw Error();return r}catch(r){throw new i.CredentialsProviderError(r.message||`Not found in ENV: ${o(e.toString())}`,{logger:d?.logger})}}),((e,{preferredFile:r="config",...t}={})=>async()=>{let a=(0,n.getProfileName)(t),{configFile:l,credentialsFile:c}=await (0,s.loadSharedConfigFiles)(t),d=c[a]||{},u=l[a]||{},f="config"===r?{...d,...u}:{...u,...d};try{let t="config"===r?l:c,i=e(f,t);if(void 0===i)throw Error();return i}catch(r){throw new i.CredentialsProviderError(r.message||`Not found in config files w/ profile [${a}]: ${o(e.toString())}`,{logger:t.logger})}})(a,c),(e=>"function"==typeof e?async()=>await e():()=>Promise.resolve(e))(l)))}],15189)},7335,e=>{"use strict";var r=e.i(9212),t=e.i(60400);let i="AWS_ACCESS_KEY_ID",o="AWS_SECRET_ACCESS_KEY",n="AWS_SESSION_TOKEN",s="AWS_CREDENTIAL_EXPIRATION",a="AWS_CREDENTIAL_SCOPE",l="AWS_ACCOUNT_ID";e.s(["ENV_ACCOUNT_ID",0,l,"ENV_CREDENTIAL_SCOPE",0,a,"ENV_EXPIRATION",0,s,"ENV_KEY",0,i,"ENV_SECRET",0,o,"ENV_SESSION",0,n,"fromEnv",0,e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let c=process.env[i],d=process.env[o],u=process.env[n],f=process.env[s],h=process.env[a],g=process.env[l];if(c&&d){let e={accessKeyId:c,secretAccessKey:d,...u&&{sessionToken:u},...f&&{expiration:new Date(f)},...h&&{credentialScope:h},...g&&{accountId:g}};return(0,r.setCredentialFeature)(e,"CREDENTIALS_ENV_VARS","g"),e}throw new t.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})}])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d8597564._.js.map