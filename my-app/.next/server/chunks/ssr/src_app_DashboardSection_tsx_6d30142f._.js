module.exports=[81614,a=>{"use strict";var b=a.i(87924),c=a.i(71336),d=a.i(19721);let e=(0,d.default)(async()=>{},{loadableGenerated:{modules:[77115]},ssr:!1,loading:()=>(0,b.jsx)("div",{className:"h-64 w-full animate-pulse rounded-lg bg-gray-100"})}),f=a=>{let{costList:d,dateStr:f,isMobile:g}=a,h=new Date(f),i=h.getFullYear(),j=h.getMonth(),k=new Date(i,j+1,0).getDate(),l=Array(k).fill(0),m=0;return d.forEach(a=>{if(a.type===c.SpendingType.Outcome){let b=new Date(a.date).getDate()-1;l[b]+=Number(a.amount),m=Math.max(m,Math.abs(l[b]))}}),(0,b.jsxs)("div",{className:"bg-background relative flex w-full flex-col items-start rounded-2xl border border-solid border-gray-300 p-6 text-gray-700 shadow-sm transition-shadow duration-200 hover:shadow md:min-w-110",children:[(0,b.jsx)("h3",{className:"mb-2 text-lg font-semibold",children:"本月消費趨勢"}),(0,b.jsx)("div",{className:"flex w-full items-end py-4 text-xs sm:text-sm",children:(0,b.jsx)(e,{month:j,data:l,init:Array(k).fill(0),isMobile:g,handleOnClick:()=>{}})})]})};var g=a.i(38246),h=a.i(42343);function i(a){return(0,h.GenIcon)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 277.333H277.333V416h-42.666V277.333H96v-42.666h138.667V96h42.666v138.667H416v42.666z"},child:[]}]})(a)}let j=({children:a,className:c=""})=>(0,b.jsx)("div",{className:`bg-background w-fit rounded-lg ${c}`,children:(0,b.jsxs)(g.default,{href:"/edit",className:"gradient-r-from-purple-to-blue flex items-center justify-center gap-2 rounded-lg px-4 py-2 sm:px-6 sm:py-3 shadow-sm hover:shadow-md transition-all duration-200",scroll:!1,children:[(0,b.jsx)(i,{className:"size-5"}),(0,b.jsx)("span",{children:a})]})});var k=a.i(58769),l=a.i(90768),m=a.i(72131),n=a.i(328);let o=(0,d.default)(async()=>{},{loadableGenerated:{modules:[82103]},ssr:!1});function p(a){let{monthlyBudget:c=0,costList:d,isMobile:e}=a,{totalIncome:f,totalOutcome:g}=(0,m.useMemo)(()=>(0,k.getExpenseFromData)(d),[d]),h=c-g;return(0,b.jsxs)("div",{className:"bg-background relative flex w-full items-center justify-between gap-4 rounded-2xl border border-solid border-gray-300 p-6 text-gray-700 shadow-sm transition-shadow duration-200 hover:shadow md:min-w-110",children:[(0,b.jsxs)("div",{className:"flex h-full min-h-35 flex-col md:min-h-50",children:[(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsxs)("h3",{className:"mb-1 text-sm font-medium text-gray-500",children:["結餘 $",(0,l.normalizeNumber)(f-g)]}),(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.MdOutlineWallet,{className:"text-primary-400 size-6"}),(0,b.jsx)("span",{className:"text-primary-500 text-xl leading-12 font-bold sm:text-3xl",children:`$${(0,l.normalizeNumber)(c-g)}`})]})]}),(0,b.jsxs)("div",{className:"mb-4 flex flex-col gap-1",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"flex items-center gap-1 text-gray-500",children:(0,b.jsx)("span",{children:"預算"})}),(0,b.jsx)("span",{className:"font-medium text-green-600",children:c?`$${(0,l.normalizeNumber)(c)}`:"$0"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,b.jsx)("span",{className:"flex items-center gap-1 text-gray-500",children:(0,b.jsx)("span",{children:"支出"})}),(0,b.jsx)("span",{className:"font-medium text-red-600",children:g?`$${(0,l.normalizeNumber)(g)}`:"$0"})]}),(0,b.jsxs)("div",{className:"mt-1 flex items-center justify-between border-t border-gray-100 pt-1 text-sm",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"剩餘預算"}),(0,b.jsx)("span",{className:`font-medium ${h>=0?"text-green-600":"text-red-600"}`,children:`$${(0,l.normalizeNumber)(h)}`})]})]}),(0,b.jsx)(j,{className:"mt-auto text-sm whitespace-nowrap sm:text-base",children:"立即新增帳目"})]}),(0,b.jsx)(o,{totalIncome:c,totalOutcome:g,isMobile:e})]})}var q=a.i(27950),r=a.i(50898),s=a.i(95077);let t=[{title:"帳目編輯",description:"詳細收支記錄",href:"/transactions",icon:a.i(51703).ListTaskIcon,gradient:"from-purple-400 to-pink-300"},{title:"帳本管理",description:"管理帳本與成員",href:"/group",icon:r.BookIcon,gradient:"from-primary-400 to-primary-600"},{title:"帳目分析",description:"查看消費統計圖表",href:"/analysis",icon:q.BarChartIcon,gradient:"from-blue-400 to-indigo-500"},{title:"預算管理",description:"設定與管理預算",href:"/budget",icon:s.CoinIcon,gradient:"from-green-400 to-emerald-500"}],u=({isMobile:a})=>(0,b.jsx)("div",{className:"grid w-full grid-cols-2 gap-3 md:min-w-110",children:t.map(a=>{let c=a.icon;return(0,b.jsxs)(g.default,{href:a.href,className:"bg-background group relative flex flex-col items-center justify-center gap-2 rounded-2xl border border-gray-200 p-4 shadow-sm transition-all duration-200 hover:scale-105 hover:shadow active:scale-100",children:[(0,b.jsx)("div",{className:`flex items-center justify-center rounded-full bg-gradient-to-r ${a.gradient} p-3`,children:(0,b.jsx)(c,{className:"size-6 text-white"})}),(0,b.jsx)("h3",{className:"text-sm font-bold text-gray-700",children:a.title}),(0,b.jsx)("p",{className:"text-center text-xs text-gray-500",children:a.description})]},a.href)})});var v=a.i(27624);let w=a=>(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-chevron-double-right",viewBox:"0 0 16 16",...a,children:[(0,b.jsx)("path",{fillRule:"evenodd",d:"M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708"}),(0,b.jsx)("path",{fillRule:"evenodd",d:"M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708"})]}),x=({data:a,loading:c,refreshData:d})=>{let e=(0,m.useMemo)(()=>[...a].sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime()).slice(0,5),[a]);return c&&0===a.length?(0,b.jsxs)("div",{className:"bg-background flex w-full flex-col rounded-2xl border border-gray-200 p-5 shadow-sm md:min-w-110",children:[(0,b.jsx)("h3",{className:"mb-4 text-lg font-bold",children:"最近 5 筆交易"}),(0,b.jsx)("div",{className:"flex flex-col gap-2",children:[1,2,3].map(a=>(0,b.jsx)("div",{className:"h-14 w-full animate-pulse rounded-lg bg-gray-100"},a))})]}):(0,b.jsxs)("div",{className:"bg-background flex w-full flex-col rounded-2xl border border-gray-200 p-5 shadow-sm md:min-w-110",children:[(0,b.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,b.jsx)("h3",{className:"text-lg font-bold",children:"最近 5 筆交易"}),(0,b.jsxs)(g.default,{href:"/transactions",className:"text-primary-500 hover:text-primary-400 active:text-primary-600 flex items-center gap-1 text-xs font-bold transition-colors",children:["查看更多",(0,b.jsx)(w,{className:"size-3"})]})]}),(0,b.jsx)("div",{className:"flex flex-col gap-2",children:0===e.length?(0,b.jsx)("p",{className:"py-8 text-center text-sm text-gray-400",children:"尚無交易記錄"}):e.map((a,c)=>(0,b.jsx)(v.SpendingItem,{spending:a,refreshData:d||(()=>{})},`${a.id}-${c}`))})]})};var y=a.i(10584),z=a.i(73651),A=a.i(61417),B=a.i(68428),C=a.i(4348),D=a.i(32888);a.s(["DashboardSection",0,({isMobile:a})=>{let{syncData:c,data:d,loading:e}=(0,z.useGetSpendingCtx)(),{currentGroup:g}=(0,y.useGroupCtx)(),[h,i]=(0,m.useState)([]),[j,k]=(0,m.useState)(null),l=(0,D.useYearMonth)(new Date),n=(0,m.useCallback)(()=>{let a=new Date,{startDate:b,endDate:d}=(0,B.getStartEndOfMonth)(a);c(g?.account_id?String(g.account_id):void 0,void 0,b.toISOString(),d.toISOString())},[g?.account_id,c]),o=(0,m.useCallback)((a,b,d)=>{let{startDate:e,endDate:f}=(0,B.getStartEndOfMonth)(new Date(Number(b),Number(d)-1));c(a||void 0,void 0,e.toISOString(),f.toISOString())},[c]);(0,m.useEffect)(()=>{g?.account_id&&(0,A.getBudget)(g.account_id).then(a=>{a.status&&a.data&&k(a.data)}).catch(console.error)},[g?.account_id]),(0,m.useEffect)(()=>{n()},[n]),(0,m.useEffect)(()=>{(0,m.startTransition)(()=>{i([...d])})},[d]);let q=(0,m.useMemo)(()=>{if(!j?.monthly_items)return 0;let a=new Date().getMonth()+1,b=0;return j.monthly_items.forEach(c=>{let d=c.months?.[a.toString()];d&&(b+=d)}),b},[j]);return(0,b.jsxs)("div",{className:"content-wrapper",children:[(0,b.jsx)(C.YearMonthFilter,{refreshData:o,group:g,dateOptions:l,className:"flex justify-center rounded-lg border border-gray-200 bg-white p-2 text-base shadow-sm"}),(0,b.jsxs)("div",{className:"flex w-full flex-col gap-3 md:w-auto md:flex-row md:gap-5",children:[(0,b.jsx)(p,{monthlyBudget:q,costList:h,isMobile:a}),(0,b.jsx)(f,{dateStr:new Date().toISOString(),costList:h,isMobile:a})]}),(0,b.jsxs)("div",{className:"flex w-full flex-col gap-3 md:w-auto md:flex-row md:gap-5",children:[(0,b.jsx)(u,{isMobile:a}),(0,b.jsx)(x,{data:h,loading:e,refreshData:n})]})]})}],81614)}];

//# sourceMappingURL=src_app_DashboardSection_tsx_6d30142f._.js.map