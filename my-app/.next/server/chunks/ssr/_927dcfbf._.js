module.exports=[90768,a=>{"use strict";a.s(["normalizeNumber",0,a=>{let b=Math.floor(a).toString(),c=[],d=b.split("").reverse(),e=0;return d.forEach(a=>{0!==e&&e%3==0&&c.push(","),c.push(a),e++}),c.toReversed().join("")}])},42343,a=>{"use strict";var b=a.i(72131),c={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},d=b.default.createContext&&b.default.createContext(c),e=["attr","size","title"];function f(){return(f=Object.assign.bind()).apply(this,arguments)}function g(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function h(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?g(Object(c),!0).forEach(function(b){var d,e,f;d=a,e=b,f=c[b],(e=function(a){var b=function(a,b){if("object"!=typeof a||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var d=c.call(a,b||"default");if("object"!=typeof d)return d;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}(a,"string");return"symbol"==typeof b?b:b+""}(e))in d?Object.defineProperty(d,e,{value:f,enumerable:!0,configurable:!0,writable:!0}):d[e]=f}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):g(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}function i(a){return c=>b.default.createElement(j,f({attr:h({},a.attr)},c),function a(c){return c&&c.map((c,d)=>b.default.createElement(c.tag,h({key:d},c.attr),a(c.child)))}(a.child))}function j(a){var g=c=>{var d,{attr:g,size:i,title:j}=a,k=function(a,b){if(null==a)return{};var c,d,e=function(a,b){if(null==a)return{};var c={};for(var d in a)if(Object.prototype.hasOwnProperty.call(a,d)){if(b.indexOf(d)>=0)continue;c[d]=a[d]}return c}(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],!(b.indexOf(c)>=0)&&Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}(a,e),l=i||c.size||"1em";return c.className&&(d=c.className),a.className&&(d=(d?d+" ":"")+a.className),b.default.createElement("svg",f({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},c.attr,g,k,{className:d,style:h(h({color:a.color||c.color},c.style),a.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),j&&b.default.createElement("title",null,j),a.children)};return void 0!==d?b.default.createElement(d.Consumer,null,a=>g(a)):g(c)}a.s(["GenIcon",()=>i],42343)},2211,a=>{"use strict";var b=a.i(87924);a.s(["CalendarIcon",0,a=>(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-calendar-event",viewBox:"0 0 16 16",...a,children:[(0,b.jsx)("path",{d:"M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5z"}),(0,b.jsx)("path",{d:"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"})]})])},78816,a=>{"use strict";var b=a.i(72131);a.s(["useScrollToTop",0,()=>{(0,b.useEffect)(()=>{window.scrollTo(0,0)},[])}])},67551,a=>{"use strict";var b=a.i(87924);a.s(["DeleteIcon",0,a=>(0,b.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash",viewBox:"0 0 16 16",...a,children:[(0,b.jsx)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),(0,b.jsx)("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"})]})])},17700,47568,a=>{"use strict";var b=a.i(87924);let c=a=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots",viewBox:"0 0 16 16",...a,children:(0,b.jsx)("path",{d:"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"})});var d=a.i(51275),e=a.i(72131);a.s(["ActionMenu",0,a=>{let{options:f,onClick:g}=a,[h,i]=(0,e.useState)(!1),j=(0,d.default)(()=>{i(!1)});return(0,b.jsxs)("div",{ref:j,className:"relative",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{i(a=>!a)},className:`rounded-full p-2 transition-colors ${h?"bg-gray-300":"hover:bg-gray-300 active:bg-gray-300"}`,children:(0,b.jsx)(c,{className:"size-4"})}),(0,b.jsx)("div",{className:`bg-background absolute top-full right-3 z-30 flex w-fit flex-col rounded-lg p-2 shadow transition-all ${h?"opacity-100":"hidden opacity-0"}`,children:f.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>{g&&g(a.value)},className:`group flex items-center gap-2 rounded px-4 py-2 whitespace-nowrap transition-colors hover:bg-gray-100 active:bg-gray-100 ${a.className??""}`,children:a.label},a.value))})]})}],17700),a.s(["EditIcon",0,a=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-pen",viewBox:"0 0 16 16",...a,children:(0,b.jsx)("path",{d:"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001m-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708z"})})],47568)},27624,a=>{"use strict";var b=a.i(87924),c=a.i(17700),d=a.i(67551),e=a.i(47568),f=a.i(90419),g=a.i(22283),h=a.i(71336),i=a.i(48372),j=a.i(8038),k=a.i(90768),l=a.i(38246),m=a.i(50944),n=a.i(72131);a.s(["SpendingItem",0,a=>{let{spending:o,refreshData:p}=a,{config:q}=(0,f.useUserConfigCtx)(),[r,s]=(0,n.useState)(!1),t=(0,m.useRouter)(),u=(0,n.useMemo)(()=>q?.email===o["user-token"],[q?.email,o]),v=(0,n.useMemo)(()=>(0,j.getSpendingCategoryMap)(o.type),[o.type]),w=(0,n.useMemo)(()=>v.find(a=>a.value===o.category),[v,o.category]),x=(0,n.useMemo)(()=>r?"shadow-[0_0_0_2px_hsl(20,80%,70%)]":"active:bg-gray-100 hover:bg-gray-100",[r]),y=(0,n.useCallback)(()=>{confirm("確定要刪除這筆資料嗎?")&&(s(!0),(0,g.deleteItem)(o.id).then(()=>{(0,n.startTransition)(()=>{s(!1),p()})}))},[p,o.id]),z=(0,n.useCallback)(a=>{"delete"===a?y():"edit"===a&&t.push(`/edit?id=${o.id}`)},[y,t,o.id]),A=(0,n.useMemo)(()=>{let a=new Date(o.date),b=a.getHours(),c=a.getMinutes().toString().padStart(2,"0");return{period:b>=12?"PM":"AM",time:`${b%12||12}:${c}`}},[o.date]);return(0,b.jsxs)("div",{className:`relative flex items-center gap-2 rounded-lg bg-gray-50 p-2 text-sm transition-all sm:text-base md:p-3 ${x}`,children:[r&&(0,b.jsx)("span",{className:"absolute top-0 left-1 -translate-y-1/2 rounded-full bg-red-300 px-2 py-0.5 text-xs font-bold text-white",children:"刪除中"}),w&&(0,b.jsx)("span",{title:h.CATEGORY_WORDING_MAP[w.value],className:"flex size-6 items-center justify-center rounded-md",children:(0,i.getCategoryIcon)(w.value,`size-5 ${o.necessity===h.Necessity.Need?"text-primary-500":"text-gray-500"}`)}),(0,b.jsxs)("div",{className:"flex flex-1 flex-col gap-0.5 overflow-hidden",children:[(0,b.jsx)("div",{title:o.description,className:"overflow-hidden text-ellipsis whitespace-nowrap font-medium",children:o.description}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)("span",{className:"rounded bg-gray-300 px-1.5 py-0.5 text-xs font-medium text-gray-600",children:A.period}),(0,b.jsx)("span",{className:"text-xs text-gray-400",children:A.time})]})]}),(0,b.jsxs)("div",{className:`w-fit text-end font-bold ${o.type===h.SpendingType.Outcome?"text-red-500":"text-green-500"}`,children:["$",(0,k.normalizeNumber)(Number(o.amount))]}),u&&(0,b.jsx)(c.ActionMenu,{onClick:z,options:[{value:"edit",label:(0,b.jsxs)(l.default,{href:`/edit?id=${o.id}`,className:"text-text group-hover:text-primary-500 group-active:text-primary-500 flex items-center gap-3 rounded px-2 py-1 transition-colors",children:[(0,b.jsx)(e.EditIcon,{className:"size-3.5 transition-colors sm:size-4"}),(0,b.jsx)("span",{children:"編輯"})]})},{value:"delete",label:(0,b.jsxs)("span",{className:"group text-text flex items-center gap-3 rounded px-2 py-1 transition-colors group-hover:text-red-500 group-active:text-red-500",children:[(0,b.jsx)(d.DeleteIcon,{className:"size-3.5 transition-colors sm:size-4"}),(0,b.jsx)("span",{children:"刪除"})]})}]})]})}])},84469,a=>{"use strict";var b=a.i(50944),c=a.i(72131);let d=a=>{let d=(0,b.useRouter)();(0,c.useEffect)(()=>{d.prefetch(a)},[d,a])};a.s(["PrefetchRoute",0,()=>(d("/edit"),d("/analysis"),d("/group"),null)],84469)},95239,a=>{"use strict";var b=a.i(87924),c=a.i(27624);let d=a=>(0,b.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",...a,children:(0,b.jsx)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"})});var e=a.i(72131);let f=a=>{let{refreshData:f,data:g,filterStr:h,loading:i}=a,j=(0,e.useMemo)(()=>g.filter(a=>""===h||a.description.includes(h)),[g,h]),k=(0,e.useMemo)(()=>{let a={};return j.forEach(b=>{let c=((a,b="MM/dd")=>{let c=new Date(a),d=c.getFullYear(),e=(c.getMonth()+1).toString().padStart(2,"0"),f=c.getDate().toString().padStart(2,"0");return"MM/dd"===b?`${e}/${f}`:"yyyy/MM/dd/"===b?`${d}/${e}/${f}`:c.toLocaleDateString()})(b.date);a[c]||(a[c]=[]),a[c].push(b)}),a},[j]);return i?(0,b.jsx)("div",{className:"flex w-full flex-col gap-2 text-xs sm:text-sm",children:[1,2,3].map(a=>(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("div",{className:"mb-1 h-4 w-24 animate-pulse rounded-md bg-gray-200"}),(0,b.jsx)("div",{className:"h-12 w-full animate-pulse rounded-lg bg-gray-100 sm:h-14"}),(0,b.jsx)("div",{className:"mt-1 h-12 w-full animate-pulse rounded-lg bg-gray-100 sm:h-14"})]},a))}):0===j.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,b.jsx)(d,{className:"mb-3 size-10 text-gray-300"}),(0,b.jsx)("p",{className:"mb-1 font-medium text-gray-600",children:"找不到符合的帳目"}),(0,b.jsx)("p",{className:"text-sm text-gray-400",children:"請嘗試其他搜尋條件或新增帳目"})]}):(0,b.jsx)("div",{className:"flex w-full flex-col gap-2 text-xs sm:text-sm",children:Object.keys(k).map((a,d)=>(0,b.jsxs)("div",{children:[(0,b.jsx)("span",{className:"text-gray-500",children:a}),(0,b.jsx)("div",{className:"flex flex-col gap-1 rounded border-2 border-solid border-transparent p-1 transition-all",id:`spending-list-${a}`,children:k[a].map((a,d)=>(0,b.jsx)(c.SpendingItem,{spending:a,refreshData:f},`${a.id}-${d.toString()}`))})]},a))})};var g=a.i(4348),h=a.i(10584),i=a.i(73651),j=a.i(78816),k=a.i(32888),l=a.i(68428);a.s(["SpendingInfoSection",0,({isMobile:a})=>{(0,j.useScrollToTop)();let{syncData:c,data:m,loading:n}=(0,i.useGetSpendingCtx)(),{currentGroup:o}=(0,h.useGroupCtx)(),[p,q]=(0,e.useState)(!0),[r,s]=(0,e.useState)([]),[t,u]=(0,e.useState)(""),v=(0,e.useRef)(null),w=(0,k.useYearMonth)(new Date),x=(0,e.useCallback)(()=>{let{startDate:a,endDate:b}=(0,l.getStartEndOfMonth)(new Date(Number(w.year),Number(w.month)-1));c(o?.account_id?String(o.account_id):void 0,void 0,a.toISOString(),b.toISOString())},[c,w.year,w.month,o?.account_id]),y=(0,e.useCallback)((a,b,d)=>{let{startDate:e,endDate:f}=(0,l.getStartEndOfMonth)(new Date(Number(b),Number(d)-1));c(a||void 0,void 0,e.toISOString(),f.toISOString())},[c]);return(0,e.useEffect)(()=>{(0,e.startTransition)(()=>{n||(s([...m]),(0,e.startTransition)(()=>{q(!1)}))})},[m,n]),(0,e.useEffect)(()=>{let a=v.current,b=()=>{u(a?.value||"")};return a?.addEventListener("change",b),()=>a?.removeEventListener("change",b)},[]),(0,e.useEffect)(()=>{let{startDate:a,endDate:b}=(0,l.getStartEndOfMonth)(new Date(Number(w.year),Number(w.month)-1));c(o?.account_id?String(o.account_id):void 0,void 0,a.toISOString(),b.toISOString())},[o?.account_id,w.month,w.year,c]),(0,b.jsxs)("div",{className:"content-wrapper",children:[(0,b.jsx)(g.YearMonthFilter,{refreshData:y,group:o,dateOptions:w,className:"flex self-center rounded-lg border border-gray-200 bg-white p-2 text-base shadow-sm"}),(0,b.jsx)("div",{className:"flex w-full flex-col items-center gap-5 md:flex-row md:items-start",children:(0,b.jsxs)("div",{className:"bg-background flex w-full flex-col rounded-2xl border border-solid border-gray-200 p-5 shadow-sm transition-shadow duration-200 hover:shadow",children:[(0,b.jsxs)("div",{className:"mb-5 flex items-center gap-4",children:[(0,b.jsx)("h3",{className:"text-lg font-bold",children:"帳目"}),(0,b.jsxs)("div",{className:"group hover:border-primary-400 focus-within:border-primary-500 relative ml-auto flex items-center gap-2 rounded-lg border border-solid border-gray-300 px-3 py-1.5 transition-all focus-within:shadow-sm",children:[(0,b.jsx)(d,{className:"group-hover:text-primary-500 group-focus-within:text-primary-500 text-gray-500 transition-colors"}),(0,b.jsx)("input",{ref:v,type:"text",placeholder:"搜尋帳目...",className:"w-32 bg-transparent py-0.5 text-sm font-medium focus:outline-0"})]})]}),(0,b.jsx)(f,{data:r,filterStr:t,loading:p,refreshData:x})]})})]})}],95239)}];

//# sourceMappingURL=_927dcfbf._.js.map