module.exports=[39545,(a,b,c)=>{var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s=!1;function t(){if(!s){s=!0;var a=navigator.userAgent,b=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(a),c=/(Mac OS X)|(Windows)|(Linux)/.exec(a);if(o=/\b(iPhone|iP[ao]d)/.exec(a),p=/\b(iP[ao]d)/.exec(a),m=/Android/i.exec(a),q=/FBAN\/\w+;/i.exec(a),r=/Mobile/i.exec(a),n=!!/Win64/.exec(a),b){(d=b[1]?parseFloat(b[1]):b[5]?parseFloat(b[5]):NaN)&&document&&document.documentMode&&(d=document.documentMode);var t=/(?:Trident\/(\d+.\d+))/.exec(a);i=t?parseFloat(t[1])+4:d,e=b[2]?parseFloat(b[2]):NaN,f=b[3]?parseFloat(b[3]):NaN,h=(g=b[4]?parseFloat(b[4]):NaN)&&(b=/(?:Chrome\/(\d+\.\d+))/.exec(a))&&b[1]?parseFloat(b[1]):NaN}else d=e=f=h=g=NaN;if(c){if(c[1]){var u=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(a);j=!u||parseFloat(u[1].replace("_","."))}else j=!1;k=!!c[2],l=!!c[3]}else j=k=l=!1}}var u={ie:function(){return t()||d},ieCompatibilityMode:function(){return t()||i>d},ie64:function(){return u.ie()&&n},firefox:function(){return t()||e},opera:function(){return t()||f},webkit:function(){return t()||g},safari:function(){return u.webkit()},chrome:function(){return t()||h},windows:function(){return t()||k},osx:function(){return t()||j},linux:function(){return t()||l},iphone:function(){return t()||o},mobile:function(){return t()||o||p||m||r},nativeApp:function(){return t()||q},android:function(){return t()||m},ipad:function(){return t()||p}};b.exports=u},17371,(a,b,c)=>{"use strict";b.exports={canUseDOM:!1,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:!1,canUseViewport:!1,isInWorker:!0}},11868,(a,b,c)=>{"use strict";var d,e=a.r(17371);e.canUseDOM&&(d=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),b.exports=function(a,b){if(!e.canUseDOM||b&&!("addEventListener"in document))return!1;var c="on"+a,f=c in document;if(!f){var g=document.createElement("div");g.setAttribute(c,"return;"),f="function"==typeof g[c]}return!f&&d&&"wheel"===a&&(f=document.implementation.hasFeature("Events.wheel","3.0")),f}},58615,(a,b,c)=>{"use strict";var d=a.r(39545),e=a.r(11868);function f(a){var b=0,c=0,d=0,e=0;return"detail"in a&&(c=a.detail),"wheelDelta"in a&&(c=-a.wheelDelta/120),"wheelDeltaY"in a&&(c=-a.wheelDeltaY/120),"wheelDeltaX"in a&&(b=-a.wheelDeltaX/120),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(b=c,c=0),d=10*b,e=10*c,"deltaY"in a&&(e=a.deltaY),"deltaX"in a&&(d=a.deltaX),(d||e)&&a.deltaMode&&(1==a.deltaMode?(d*=40,e*=40):(d*=800,e*=800)),d&&!b&&(b=d<1?-1:1),e&&!c&&(c=e<1?-1:1),{spinX:b,spinY:c,pixelX:d,pixelY:e}}f.getEventType=function(){return d.firefox()?"DOMMouseScroll":e("wheel")?"wheel":"mousewheel"},b.exports=f},3478,(a,b,c)=>{b.exports=a.r(58615)},70298,a=>{"use strict";var b=a.i(87924),c=a.i(88293),d=a.i(72131),e=function(a,b){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])})(a,b)},f=function(){return(f=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++)for(var e in b=arguments[c])Object.prototype.hasOwnProperty.call(b,e)&&(a[e]=b[e]);return a}).apply(this,arguments)},g=("function"==typeof SuppressedError&&SuppressedError,a.i(3478));function h(a,b,c,d,e){void 0===e&&(e=0);var f=o(b.width,b.height,e),g=f.width,h=f.height;return{x:i(a.x,g,c.width,d),y:i(a.y,h,c.height,d)}}function i(a,b,c,d){var e=b*d/2-c/2;return p(a,-e,e)}function j(a,b){return Math.sqrt(Math.pow(a.y-b.y,2)+Math.pow(a.x-b.x,2))}function k(a,b){return 180*Math.atan2(b.y-a.y,b.x-a.x)/Math.PI}function l(a,b){return Math.min(a,Math.max(0,b))}function m(a,b){return b}function n(a,b){return{x:(b.x+a.x)/2,y:(b.y+a.y)/2}}function o(a,b,c){var d=c*Math.PI/180;return{width:Math.abs(Math.cos(d)*a)+Math.abs(Math.sin(d)*b),height:Math.abs(Math.sin(d)*a)+Math.abs(Math.cos(d)*b)}}function p(a,b,c){return Math.min(Math.max(a,b),c)}function q(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return a.filter(function(a){return"string"==typeof a&&!!(a.length>0)}).join(" ").trim()}var r=function(a){if("function"!=typeof a&&null!==a)throw TypeError("Class extends value "+String(a)+" is not a constructor or null");function b(){this.constructor=c}function c(){var b=null!==a&&a.apply(this,arguments)||this;return b.cropperRef=d.createRef(),b.imageRef=d.createRef(),b.videoRef=d.createRef(),b.containerPosition={x:0,y:0},b.containerRef=null,b.styleRef=null,b.containerRect=null,b.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},b.dragStartPosition={x:0,y:0},b.dragStartCrop={x:0,y:0},b.gestureZoomStart=0,b.gestureRotationStart=0,b.isTouching=!1,b.lastPinchDistance=0,b.lastPinchRotation=0,b.rafDragTimeout=null,b.rafPinchTimeout=null,b.wheelTimer=null,b.currentDoc="undefined"!=typeof document?document:null,b.currentWindow=null,b.resizeObserver=null,b.previousCropSize=null,b.isInitialized=!1,b.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},b.initResizeObserver=function(){if(void 0!==window.ResizeObserver&&b.containerRef){var a=!0;b.resizeObserver=new window.ResizeObserver(function(c){if(a){a=!1;return}b.computeSizes()}),b.resizeObserver.observe(b.containerRef)}},b.preventZoomSafari=function(a){return a.preventDefault()},b.cleanEvents=function(){b.currentDoc&&(b.currentDoc.removeEventListener("mousemove",b.onMouseMove),b.currentDoc.removeEventListener("mouseup",b.onDragStopped),b.currentDoc.removeEventListener("touchmove",b.onTouchMove),b.currentDoc.removeEventListener("touchend",b.onDragStopped),b.currentDoc.removeEventListener("gesturechange",b.onGestureChange),b.currentDoc.removeEventListener("gestureend",b.onGestureEnd),b.currentDoc.removeEventListener("scroll",b.onScroll))},b.clearScrollEvent=function(){b.containerRef&&b.containerRef.removeEventListener("wheel",b.onWheel),b.wheelTimer&&clearTimeout(b.wheelTimer)},b.onMediaLoad=function(){var a=b.computeSizes();a&&(b.previousCropSize=a,b.emitCropData(),b.setInitialCrop(a),b.isInitialized=!0),b.props.onMediaLoaded&&b.props.onMediaLoaded(b.mediaSize)},b.setInitialCrop=function(a){if(b.props.initialCroppedAreaPercentages){var c,d,e,f,g,h,i,j=(c=b.props.initialCroppedAreaPercentages,d=b.mediaSize,e=b.props.rotation,f=b.props.minZoom,g=b.props.maxZoom,h=o(d.width,d.height,e),{crop:{x:(i=p(a.width/h.width*(100/c.width),f,g))*h.width/2-a.width/2-h.width*i*(c.x/100),y:i*h.height/2-a.height/2-h.height*i*(c.y/100)},zoom:i}),k=j.crop,l=j.zoom;b.props.onCropChange(k),b.props.onZoomChange&&b.props.onZoomChange(l)}else if(b.props.initialCroppedAreaPixels){var m,n,q,r,s,t,u,v,w,x=(m=b.props.initialCroppedAreaPixels,n=b.mediaSize,q=b.props.rotation,r=b.props.minZoom,s=b.props.maxZoom,void 0===q&&(q=0),t=o(n.naturalWidth,n.naturalHeight,q),v=p((u=n.width>n.height?n.width/n.naturalWidth:n.height/n.naturalHeight,a.height>a.width?a.height/(m.height*u):a.width/(m.width*u)),r,s),w=a.height>a.width?a.height/m.height:a.width/m.width,{crop:{x:((t.width-m.width)/2-m.x)*w,y:((t.height-m.height)/2-m.y)*w},zoom:v}),k=x.crop,l=x.zoom;b.props.onCropChange(k),b.props.onZoomChange&&b.props.onZoomChange(l)}},b.computeSizes=function(){var a,c,d,e,g,h,i=b.imageRef.current||b.videoRef.current;if(i&&b.containerRef){b.containerRect=b.containerRef.getBoundingClientRect(),b.saveContainerPosition();var j,k,l,m,n,p,q,r,s,t,u,v=b.containerRect.width/b.containerRect.height,w=(null==(a=b.imageRef.current)?void 0:a.naturalWidth)||(null==(c=b.videoRef.current)?void 0:c.videoWidth)||0,x=(null==(d=b.imageRef.current)?void 0:d.naturalHeight)||(null==(e=b.videoRef.current)?void 0:e.videoHeight)||0,y=i.offsetWidth<w||i.offsetHeight<x,z=w/x,A=void 0;if(y)switch(b.state.mediaObjectFit){default:case"contain":A=v>z?{width:b.containerRect.height*z,height:b.containerRect.height}:{width:b.containerRect.width,height:b.containerRect.width/z};break;case"horizontal-cover":A={width:b.containerRect.width,height:b.containerRect.width/z};break;case"vertical-cover":A={width:b.containerRect.height*z,height:b.containerRect.height}}else A={width:i.offsetWidth,height:i.offsetHeight};b.mediaSize=f(f({},A),{naturalWidth:w,naturalHeight:x}),b.props.setMediaSize&&b.props.setMediaSize(b.mediaSize);var B=b.props.cropSize?b.props.cropSize:(j=b.mediaSize.width,k=b.mediaSize.height,l=b.containerRect.width,m=b.containerRect.height,n=b.props.aspect,void 0===(p=b.props.rotation)&&(p=0),r=(q=o(j,k,p)).width,s=q.height,(t=Math.min(r,l))>(u=Math.min(s,m))*n?{width:u*n,height:u}:{width:t,height:t/n});return((null==(g=b.state.cropSize)?void 0:g.height)!==B.height||(null==(h=b.state.cropSize)?void 0:h.width)!==B.width)&&b.props.onCropSizeChange&&b.props.onCropSizeChange(B),b.setState({cropSize:B},b.recomputeCropPosition),b.props.setCropSize&&b.props.setCropSize(B),B}},b.saveContainerPosition=function(){if(b.containerRef){var a=b.containerRef.getBoundingClientRect();b.containerPosition={x:a.left,y:a.top}}},b.onMouseDown=function(a){b.currentDoc&&(a.preventDefault(),b.currentDoc.addEventListener("mousemove",b.onMouseMove),b.currentDoc.addEventListener("mouseup",b.onDragStopped),b.saveContainerPosition(),b.onDragStart(c.getMousePoint(a)))},b.onMouseMove=function(a){return b.onDrag(c.getMousePoint(a))},b.onScroll=function(a){b.currentDoc&&(a.preventDefault(),b.saveContainerPosition())},b.onTouchStart=function(a){!b.currentDoc||(b.isTouching=!0,(!b.props.onTouchRequest||b.props.onTouchRequest(a))&&(b.currentDoc.addEventListener("touchmove",b.onTouchMove,{passive:!1}),b.currentDoc.addEventListener("touchend",b.onDragStopped),b.saveContainerPosition(),2===a.touches.length?b.onPinchStart(a):1===a.touches.length&&b.onDragStart(c.getTouchPoint(a.touches[0]))))},b.onTouchMove=function(a){a.preventDefault(),2===a.touches.length?b.onPinchMove(a):1===a.touches.length&&b.onDrag(c.getTouchPoint(a.touches[0]))},b.onGestureStart=function(a){b.currentDoc&&(a.preventDefault(),b.currentDoc.addEventListener("gesturechange",b.onGestureChange),b.currentDoc.addEventListener("gestureend",b.onGestureEnd),b.gestureZoomStart=b.props.zoom,b.gestureRotationStart=b.props.rotation)},b.onGestureChange=function(a){if(a.preventDefault(),!b.isTouching){var d=c.getMousePoint(a),e=b.gestureZoomStart-1+a.scale;if(b.setNewZoom(e,d,{shouldUpdatePosition:!0}),b.props.onRotationChange){var f=b.gestureRotationStart+a.rotation;b.props.onRotationChange(f)}}},b.onGestureEnd=function(a){b.cleanEvents()},b.onDragStart=function(a){var c,d;b.dragStartPosition={x:a.x,y:a.y},b.dragStartCrop=f({},b.props.crop),null==(d=(c=b.props).onInteractionStart)||d.call(c)},b.onDrag=function(a){var c=a.x,d=a.y;b.currentWindow&&(b.rafDragTimeout&&b.currentWindow.cancelAnimationFrame(b.rafDragTimeout),b.rafDragTimeout=b.currentWindow.requestAnimationFrame(function(){if(b.state.cropSize&&void 0!==c&&void 0!==d){var a=c-b.dragStartPosition.x,e=d-b.dragStartPosition.y,f={x:b.dragStartCrop.x+a,y:b.dragStartCrop.y+e},g=b.props.restrictPosition?h(f,b.mediaSize,b.state.cropSize,b.props.zoom,b.props.rotation):f;b.props.onCropChange(g)}}))},b.onDragStopped=function(){var a,c;b.isTouching=!1,b.cleanEvents(),b.emitCropData(),null==(c=(a=b.props).onInteractionEnd)||c.call(a)},b.onWheel=function(a){if(b.currentWindow&&(!b.props.onWheelRequest||b.props.onWheelRequest(a))){a.preventDefault();var d=c.getMousePoint(a),e=(0,g.default)(a).pixelY,f=b.props.zoom-e*b.props.zoomSpeed/200;b.setNewZoom(f,d,{shouldUpdatePosition:!0}),b.state.hasWheelJustStarted||b.setState({hasWheelJustStarted:!0},function(){var a,c;return null==(c=(a=b.props).onInteractionStart)?void 0:c.call(a)}),b.wheelTimer&&clearTimeout(b.wheelTimer),b.wheelTimer=b.currentWindow.setTimeout(function(){return b.setState({hasWheelJustStarted:!1},function(){var a,c;return null==(c=(a=b.props).onInteractionEnd)?void 0:c.call(a)})},250)}},b.getPointOnContainer=function(a,c){var d=a.x,e=a.y;if(!b.containerRect)throw Error("The Cropper is not mounted");return{x:b.containerRect.width/2-(d-c.x),y:b.containerRect.height/2-(e-c.y)}},b.getPointOnMedia=function(a){var c=a.x,d=a.y,e=b.props,f=e.crop,g=e.zoom;return{x:(c+f.x)/g,y:(d+f.y)/g}},b.setNewZoom=function(a,c,d){var e=(void 0===d?{}:d).shouldUpdatePosition;if(b.state.cropSize&&b.props.onZoomChange){var f=p(a,b.props.minZoom,b.props.maxZoom);if(void 0===e||e){var g=b.getPointOnContainer(c,b.containerPosition),i=b.getPointOnMedia(g),j={x:i.x*f-g.x,y:i.y*f-g.y},k=b.props.restrictPosition?h(j,b.mediaSize,b.state.cropSize,f,b.props.rotation):j;b.props.onCropChange(k)}b.props.onZoomChange(f)}},b.getCropData=function(){var a,c,d,e,g,i,j,k,n,p,q,r,s,t,u;return b.state.cropSize?(a=b.props.restrictPosition?h(b.props.crop,b.mediaSize,b.state.cropSize,b.props.zoom,b.props.rotation):b.props.crop,c=b.mediaSize,d=b.state.cropSize,e=b.getAspect(),g=b.props.zoom,i=b.props.rotation,j=b.props.restrictPosition,void 0===i&&(i=0),void 0===j&&(j=!0),k=j?l:m,n=o(c.width,c.height,i),p=o(c.naturalWidth,c.naturalHeight,i),q={x:k(100,((n.width-d.width/g)/2-a.x/g)/n.width*100),y:k(100,((n.height-d.height/g)/2-a.y/g)/n.height*100),width:k(100,d.width/n.width*100/g),height:k(100,d.height/n.height*100/g)},r=Math.round(k(p.width,q.width*p.width/100)),s=Math.round(k(p.height,q.height*p.height/100)),t=p.width>=p.height*e?{width:Math.round(s*e),height:s}:{width:r,height:Math.round(r/e)},u=f(f({},t),{x:Math.round(k(p.width-t.width,q.x*p.width/100)),y:Math.round(k(p.height-t.height,q.y*p.height/100))}),{croppedAreaPercentages:q,croppedAreaPixels:u}):null},b.emitCropData=function(){var a=b.getCropData();if(a){var c=a.croppedAreaPercentages,d=a.croppedAreaPixels;b.props.onCropComplete&&b.props.onCropComplete(c,d),b.props.onCropAreaChange&&b.props.onCropAreaChange(c,d)}},b.emitCropAreaChange=function(){var a=b.getCropData();if(a){var c=a.croppedAreaPercentages,d=a.croppedAreaPixels;b.props.onCropAreaChange&&b.props.onCropAreaChange(c,d)}},b.recomputeCropPosition=function(){if(b.state.cropSize){var a,c,d=b.props.crop;if(b.isInitialized&&(null==(a=b.previousCropSize)?void 0:a.width)&&(null==(c=b.previousCropSize)?void 0:c.height)&&(Math.abs(b.previousCropSize.width-b.state.cropSize.width)>1e-6||Math.abs(b.previousCropSize.height-b.state.cropSize.height)>1e-6)){var e=b.state.cropSize.width/b.previousCropSize.width,f=b.state.cropSize.height/b.previousCropSize.height;d={x:b.props.crop.x*e,y:b.props.crop.y*f}}var g=b.props.restrictPosition?h(d,b.mediaSize,b.state.cropSize,b.props.zoom,b.props.rotation):d;b.previousCropSize=b.state.cropSize,b.props.onCropChange(g),b.emitCropData()}},b.onKeyDown=function(a){var c,d,e=b.props,g=e.crop,i=e.onCropChange,j=e.keyboardStep,k=e.zoom,l=e.rotation,m=j;if(b.state.cropSize){a.shiftKey&&(m*=.2);var n=f({},g);switch(a.key){case"ArrowUp":n.y-=m,a.preventDefault();break;case"ArrowDown":n.y+=m,a.preventDefault();break;case"ArrowLeft":n.x-=m,a.preventDefault();break;case"ArrowRight":n.x+=m,a.preventDefault();break;default:return}b.props.restrictPosition&&(n=h(n,b.mediaSize,b.state.cropSize,k,l)),a.repeat||null==(d=(c=b.props).onInteractionStart)||d.call(c),i(n)}},b.onKeyUp=function(a){var c,d;switch(a.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":a.preventDefault();break;default:return}b.emitCropData(),null==(d=(c=b.props).onInteractionEnd)||d.call(c)},b}return e(c,a),c.prototype=null===a?Object.create(a):(b.prototype=a.prototype,new b),c.prototype.componentDidMount=function(){this.currentDoc&&this.currentWindow&&(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),void 0===window.ResizeObserver&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=".reactEasyCrop_Container {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: hidden;\n  user-select: none;\n  touch-action: none;\n  cursor: move;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.reactEasyCrop_Image,\n.reactEasyCrop_Video {\n  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */\n}\n\n.reactEasyCrop_Contain {\n  max-width: 100%;\n  max-height: 100%;\n  margin: auto;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.reactEasyCrop_Cover_Horizontal {\n  width: 100%;\n  height: auto;\n}\n.reactEasyCrop_Cover_Vertical {\n  width: auto;\n  height: 100%;\n}\n\n.reactEasyCrop_CropArea {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  box-sizing: border-box;\n  box-shadow: 0 0 0 9999em;\n  color: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n}\n\n.reactEasyCrop_CropAreaRound {\n  border-radius: 50%;\n}\n\n.reactEasyCrop_CropAreaGrid::before {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 0;\n  bottom: 0;\n  left: 33.33%;\n  right: 33.33%;\n  border-top: 0;\n  border-bottom: 0;\n}\n\n.reactEasyCrop_CropAreaGrid::after {\n  content: ' ';\n  box-sizing: border-box;\n  position: absolute;\n  border: 1px solid rgba(255, 255, 255, 0.5);\n  top: 33.33%;\n  bottom: 33.33%;\n  left: 0;\n  right: 0;\n  border-left: 0;\n  border-right: 0;\n}\n",this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},c.prototype.componentWillUnmount=function(){var a,b;this.currentDoc&&this.currentWindow&&(void 0===window.ResizeObserver&&this.currentWindow.removeEventListener("resize",this.computeSizes),null==(a=this.resizeObserver)||a.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&(null==(b=this.styleRef.parentNode)||b.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},c.prototype.componentDidUpdate=function(a){a.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):a.aspect!==this.props.aspect||a.objectFit!==this.props.objectFit?this.computeSizes():a.zoom!==this.props.zoom?this.recomputeCropPosition():(null==(b=a.cropSize)?void 0:b.height)!==(null==(c=this.props.cropSize)?void 0:c.height)||(null==(d=a.cropSize)?void 0:d.width)!==(null==(e=this.props.cropSize)?void 0:e.width)?this.computeSizes():((null==(f=a.crop)?void 0:f.x)!==(null==(g=this.props.crop)?void 0:g.x)||(null==(h=a.crop)?void 0:h.y)!==(null==(i=this.props.crop)?void 0:i.y))&&this.emitCropAreaChange(),a.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),a.video!==this.props.video&&(null==(j=this.videoRef.current)||j.load());var b,c,d,e,f,g,h,i,j,k=this.getObjectFit();k!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:k},this.computeSizes)},c.prototype.getAspect=function(){var a=this.props,b=a.cropSize,c=a.aspect;return b?b.width/b.height:c},c.prototype.getObjectFit=function(){var a,b,c,d;if("cover"===this.props.objectFit){if((this.imageRef.current||this.videoRef.current)&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var e=this.containerRect.width/this.containerRect.height;return((null==(a=this.imageRef.current)?void 0:a.naturalWidth)||(null==(b=this.videoRef.current)?void 0:b.videoWidth)||0)/((null==(c=this.imageRef.current)?void 0:c.naturalHeight)||(null==(d=this.videoRef.current)?void 0:d.videoHeight)||0)<e?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},c.prototype.onPinchStart=function(a){var b=c.getTouchPoint(a.touches[0]),d=c.getTouchPoint(a.touches[1]);this.lastPinchDistance=j(b,d),this.lastPinchRotation=k(b,d),this.onDragStart(n(b,d))},c.prototype.onPinchMove=function(a){var b=this;if(this.currentDoc&&this.currentWindow){var d=c.getTouchPoint(a.touches[0]),e=c.getTouchPoint(a.touches[1]),f=n(d,e);this.onDrag(f),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var a=j(d,e),c=b.props.zoom*(a/b.lastPinchDistance);b.setNewZoom(c,f,{shouldUpdatePosition:!1}),b.lastPinchDistance=a;var g=k(d,e),h=b.props.rotation+(g-b.lastPinchRotation);b.props.onRotationChange&&b.props.onRotationChange(h),b.lastPinchRotation=g})}},c.prototype.render=function(){var a,b=this,c=this.props,e=c.image,g=c.video,h=c.mediaProps,i=c.cropperProps,j=c.transform,k=c.crop,l=k.x,m=k.y,n=c.rotation,o=c.zoom,p=c.cropShape,r=c.showGrid,s=c.roundCropAreaPixels,t=c.style,u=t.containerStyle,v=t.cropAreaStyle,w=t.mediaStyle,x=c.classes,y=x.containerClassName,z=x.cropAreaClassName,A=x.mediaClassName,B=null!=(a=this.state.mediaObjectFit)?a:this.getObjectFit();return d.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(a){return b.containerRef=a},"data-testid":"container",style:u,className:q("reactEasyCrop_Container",y)},e?d.createElement("img",f({alt:"",className:q("reactEasyCrop_Image","contain"===B&&"reactEasyCrop_Contain","horizontal-cover"===B&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===B&&"reactEasyCrop_Cover_Vertical",A)},h,{src:e,ref:this.imageRef,style:f(f({},w),{transform:j||"translate(".concat(l,"px, ").concat(m,"px) rotate(").concat(n,"deg) scale(").concat(o,")")}),onLoad:this.onMediaLoad})):g&&d.createElement("video",f({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:q("reactEasyCrop_Video","contain"===B&&"reactEasyCrop_Contain","horizontal-cover"===B&&"reactEasyCrop_Cover_Horizontal","vertical-cover"===B&&"reactEasyCrop_Cover_Vertical",A)},h,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:f(f({},w),{transform:j||"translate(".concat(l,"px, ").concat(m,"px) rotate(").concat(n,"deg) scale(").concat(o,")")}),controls:!1}),(Array.isArray(g)?g:[{src:g}]).map(function(a){return d.createElement("source",f({key:a.src},a))})),this.state.cropSize&&d.createElement("div",f({ref:this.cropperRef,style:f(f({},v),{width:s?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:s?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:q("reactEasyCrop_CropArea","round"===p&&"reactEasyCrop_CropAreaRound",r&&"reactEasyCrop_CropAreaGrid",z)},i)))},c.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:3,minZoom:1,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:1},c.getMousePoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},c.getTouchPoint=function(a){return{x:Number(a.clientX),y:Number(a.clientY)}},c}(d.Component);function s({image:a,onCropComplete:c,onCancel:e}){let[f,g]=(0,d.useState)({x:0,y:0}),[h,i]=(0,d.useState)(1),[j,k]=(0,d.useState)(null),l=(0,d.useCallback)((a,b)=>{k(b)},[]),m=async(a,b)=>{let c=await new Promise((b,c)=>{let d=new Image;d.addEventListener("load",()=>b(d)),d.addEventListener("error",a=>c(a)),d.src=a}),d=document.createElement("canvas"),e=d.getContext("2d");if(!e)throw Error("Failed to get canvas context");return d.width=b.width,d.height=b.height,e.drawImage(c,b.x,b.y,b.width,b.height,0,0,b.width,b.height),new Promise(a=>{d.toBlob(b=>{if(!b)throw Error("Canvas is empty");let c=new FileReader;c.readAsDataURL(b),c.onloadend=()=>{a(c.result)}},"image/jpeg")})},n=async()=>{if(j)try{let b=await m(a,j);c(b)}catch(a){console.error("Error cropping image:",a)}};return(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col bg-black",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between bg-gray-900 px-4 py-3",children:[(0,b.jsx)("button",{onClick:e,className:"text-white hover:text-gray-300",children:"取消"}),(0,b.jsx)("h2",{className:"text-lg font-semibold text-white",children:"裁剪圖片"}),(0,b.jsx)("button",{onClick:n,className:"font-semibold text-blue-500 hover:text-blue-400",children:"完成"})]}),(0,b.jsx)("div",{className:"relative flex-1",children:(0,b.jsx)(r,{image:a,crop:f,zoom:h,aspect:1,cropShape:"round",showGrid:!1,onCropChange:a=>{g(a)},onZoomChange:a=>{i(a)},onCropComplete:l})}),(0,b.jsx)("div",{className:"bg-gray-900 px-6 py-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("span",{className:"text-sm text-white",children:"縮放"}),(0,b.jsx)("input",{type:"range",min:1,max:3,step:.1,value:h,onChange:a=>i(Number(a.target.value)),className:"flex-1"})]})})]})}var t=a.i(90419),u=a.i(18402),v=a.i(50944);function w(){let a=(0,v.useRouter)(),{config:e,setter:f}=(0,t.useUserConfigCtx)(),[g,h]=(0,d.useState)(e?.name||""),[i,j]=(0,d.useState)(e?.avatar_url||""),[k,l]=(0,d.useState)(null),[m,n]=(0,d.useState)(!1),[o,p]=(0,d.useState)(!1),q=(0,d.useRef)(null),r=async a=>{let b=a.target.files?.[0];if(b){if(!b.type.startsWith("image/"))return void alert("請選擇圖片檔案");if(b.size>5242880)return void alert("圖片檔案不可超過 5MB");n(!0);try{let a=new FileReader;a.onloadend=()=>{let b=a.result;l(b),n(!1)},a.onerror=()=>{alert("圖片讀取失敗"),n(!1)},a.readAsDataURL(b)}catch(a){console.error("Error uploading image:",a),alert("圖片上傳失敗"),n(!1)}}},w=async()=>{if(e?.user_id){p(!0);try{let b={...e,name:g,avatar_url:i};await f(b),alert("更新成功"),a.back()}catch(a){console.error("Error updating profile:",a),alert("更新失敗，請稍後再試")}finally{p(!1)}}},x=async()=>{confirm("確定要登出嗎？")&&await (0,u.signOut)({callbackUrl:"/login"})};return e?(0,b.jsxs)(b.Fragment,{children:[k&&(0,b.jsx)(s,{image:k,onCropComplete:a=>{j(a),l(null)},onCancel:()=>{l(null)}}),(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20",children:[(0,b.jsx)("div",{className:"bg-white shadow-sm",children:(0,b.jsx)("div",{className:"mx-auto max-w-2xl px-4 py-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("button",{onClick:()=>a.back(),className:"text-gray-600 hover:text-gray-900",children:(0,b.jsx)("svg",{className:"size-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,b.jsx)("h1",{className:"text-lg font-bold",children:"個人資料"}),(0,b.jsx)("div",{className:"w-6"})]})})}),(0,b.jsx)("div",{className:"mx-auto max-w-2xl px-4 py-6",children:(0,b.jsxs)("div",{className:"rounded-lg bg-white p-6 shadow-sm",children:[(0,b.jsxs)("div",{className:"mb-6 flex flex-col items-center",children:[(0,b.jsxs)("div",{className:"relative mb-4",children:[(0,b.jsx)("div",{className:"size-24 overflow-hidden rounded-full",children:i?(0,b.jsx)("img",{src:i,alt:"Avatar",className:"size-full object-cover"}):(0,b.jsx)("div",{className:"size-full",children:(0,b.jsx)(c.UserAvatar,{user:{...e,avatar_url:i}})})}),m&&(0,b.jsx)("div",{className:"absolute inset-0 flex items-center justify-center rounded-full bg-black/50",children:(0,b.jsx)("div",{className:"size-6 animate-spin rounded-full border-2 border-white border-t-transparent"})})]}),(0,b.jsx)("input",{ref:q,type:"file",accept:"image/*",onChange:r,className:"hidden"}),(0,b.jsx)("button",{onClick:()=>q.current?.click(),disabled:m,className:"text-primary-500 hover:text-primary-600 text-sm font-semibold disabled:opacity-50",children:m?"上傳中...":"更換頭像"})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"mb-2 block text-sm font-semibold text-gray-700",children:"名稱"}),(0,b.jsx)("input",{type:"text",value:g,onChange:a=>h(a.target.value),className:"w-full rounded-md border border-gray-300 px-4 py-2 focus:border-primary-500 focus:outline-none",placeholder:"請輸入名稱"})]}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("label",{className:"mb-2 block text-sm font-semibold text-gray-700",children:"Email"}),(0,b.jsx)("input",{type:"email",value:e.email,disabled:!0,className:"w-full rounded-md border border-gray-300 bg-gray-100 px-4 py-2 text-gray-500"})]}),(0,b.jsx)("button",{onClick:w,disabled:o||m,className:"bg-primary-500 hover:bg-primary-600 mb-4 w-full rounded-md py-3 font-semibold text-white transition-colors disabled:opacity-50",children:o?"儲存中...":"儲存變更"}),(0,b.jsx)("div",{className:"my-6 border-t border-gray-200"}),(0,b.jsx)("button",{onClick:x,className:"w-full rounded-md border border-red-500 py-3 font-semibold text-red-500 transition-colors hover:bg-red-50",children:"登出"})]})})]})]}):(0,b.jsx)("div",{className:"flex min-h-screen items-center justify-center",children:(0,b.jsx)("p",{className:"text-gray-500",children:"載入中..."})})}a.s(["default",()=>w],70298)}];

//# sourceMappingURL=_10e5ece0._.js.map