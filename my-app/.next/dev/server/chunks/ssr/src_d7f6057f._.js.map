{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/kw_yeh/Desktop/SpendingTracker/my-app/src/app/analysis/ChartContainer.tsx"],"sourcesContent":["import { ReactNode } from 'react';\n\nexport const ChartContainer = ({\n  title,\n  children,\n}: {\n  title: string;\n  children: ReactNode;\n}) => {\n  return (\n    <div className=\"relative flex w-full flex-col items-center rounded-xl bg-white p-6 shadow-md transition-all hover:shadow-lg z-10\">\n      <div className=\"mb-4 w-full\">\n        <h2 className=\"relative inline-block text-xl font-bold text-gray-800 select-none\">\n          {title}\n          <span className=\"absolute -bottom-1 left-0 h-1 w-1/2 rounded-full bg-primary-300\"></span>\n        </h2>\n      </div>\n      {children}\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,iBAAiB,CAAC,EAC7B,KAAK,EACL,QAAQ,EAIT;IACC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAG,WAAU;;wBACX;sCACD,8OAAC;4BAAK,WAAU;;;;;;;;;;;;;;;;;YAGnB;;;;;;;AAGP"}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///Users/kw_yeh/Desktop/SpendingTracker/my-app/src/components/icons/CalendarIcon.tsx"],"sourcesContent":["import { HTMLAttributes } from 'react';\n\nexport const CalendarIcon = (props: HTMLAttributes<HTMLOrSVGElement>) => {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"16\"\n      height=\"16\"\n      fill=\"currentColor\"\n      className=\"bi bi-calendar-event\"\n      viewBox=\"0 0 16 16\"\n      {...props}\n    >\n      <path d=\"M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5z\" />\n      <path d=\"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z\" />\n    </svg>\n  );\n};\n"],"names":[],"mappings":";;;;;;AAEO,MAAM,eAAe,CAAC;IAC3B,qBACE,8OAAC;QACC,OAAM;QACN,OAAM;QACN,QAAO;QACP,MAAK;QACL,WAAU;QACV,SAAQ;QACP,GAAG,KAAK;;0BAET,8OAAC;gBAAK,GAAE;;;;;;0BACR,8OAAC;gBAAK,GAAE;;;;;;;;;;;;AAGd"}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/analysis/YearMonthFilter.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"dropIn\": \"YearMonthFilter-module__HsT8ZG__dropIn\",\n  \"dropdownAnimation\": \"YearMonthFilter-module__HsT8ZG__dropdownAnimation\",\n  \"monthButton\": \"YearMonthFilter-module__HsT8ZG__monthButton\",\n  \"navButton\": \"YearMonthFilter-module__HsT8ZG__navButton\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///Users/kw_yeh/Desktop/SpendingTracker/my-app/src/app/analysis/YearMonthFilter.tsx"],"sourcesContent":["'use client';\n\nimport { CalendarIcon } from '@/components/icons/CalendarIcon';\nimport useFocusRef from '@/hooks/useFocusRef';\nimport { MONTH_LABEL, MONTH_MAP } from '@/utils/constants';\nimport { useEffect, useState } from 'react';\nimport { BiChevronLeft, BiChevronRight } from 'react-icons/bi';\nimport styles from './YearMonthFilter.module.css';\n\ninterface Props {\n  refreshData: (\n    groupId: string | undefined,\n    year: string,\n    month: string,\n  ) => void;\n  group?: Group;\n  dateOptions: {\n    today: Date;\n    year: string;\n    setYear: (year: string) => void;\n    month: string;\n    setMonth: (month: string) => void;\n  };\n  className?: string;\n}\n\nexport const YearMonthFilter = (props: Props) => {\n  const { refreshData, group, dateOptions, className = '' } = props;\n  const { setYear, year, setMonth, month } = dateOptions;\n  const [open, setOpen] = useState(false);\n  const ref = useFocusRef<HTMLDivElement>(() => {\n    setOpen(false);\n  });\n\n  useEffect(() => {\n    refreshData(\n      group?.account_id ? String(group.account_id) : undefined,\n      year,\n      month,\n    );\n  }, [group?.account_id, year, month, refreshData]);\n\n  const handlePreviousMonth = () => {\n    if (month === '1') {\n      setMonth('12');\n      setYear((Number(year) - 1).toString());\n    } else {\n      setMonth((Number(month) - 1).toString());\n    }\n    setOpen(false);\n  };\n\n  const handleNextMonth = () => {\n    if (month === '12') {\n      setMonth('1');\n      setYear((Number(year) + 1).toString());\n    } else {\n      setMonth((Number(month) + 1).toString());\n    }\n    setOpen(false);\n  };\n\n  const currentMonthName = MONTH_MAP[month];\n  const isCurrentMonth = () => {\n    const today = new Date();\n    return (\n      today.getFullYear().toString() === year &&\n      (today.getMonth() + 1).toString() === month\n    );\n  };\n\n  return (\n    <div\n      className={`relative ${className} transition-all ${\n        open\n          ? 'border-primary-500 bg-primary-50 text-primary-700 shadow-md'\n          : 'hover:border-primary-300 hover:bg-primary-50 border-gray-300 bg-white text-gray-800'\n      }`}\n    >\n      <div className=\"flex items-center gap-2\">\n        <button\n          type=\"button\"\n          onClick={handlePreviousMonth}\n          className={`flex items-center justify-center rounded-full p-1.5 text-gray-600 transition-all hover:bg-gray-100 active:bg-gray-200 ${styles.navButton}`}\n          aria-label=\"上個月\"\n        >\n          <BiChevronLeft className=\"size-6\" />\n        </button>\n\n        <button\n          type=\"button\"\n          onClick={() => setOpen(true)}\n          className={`flex items-center gap-3 rounded-lg px-4 py-2`}\n        >\n          <CalendarIcon className=\"text-primary-500 size-5\" />\n          <div className=\"flex items-baseline gap-1.5\">\n            <span className=\"text-lg font-medium\">{currentMonthName}</span>\n            <span className=\"text-sm text-gray-500\">{year}</span>\n          </div>\n          {isCurrentMonth() && (\n            <span className=\"bg-primary-100 text-primary-700 ml-1 rounded-full px-1.5 py-0.5 text-xs font-medium\">\n              本月\n            </span>\n          )}\n        </button>\n\n        <button\n          type=\"button\"\n          onClick={handleNextMonth}\n          className={`flex items-center justify-center rounded-full p-1.5 text-gray-600 transition-all hover:bg-gray-100 active:bg-gray-200 ${styles.navButton}`}\n          aria-label=\"下個月\"\n        >\n          <BiChevronRight className=\"size-6\" />\n        </button>\n      </div>\n\n      {/* Dropdown panel */}\n      <div\n        ref={ref}\n        className={`absolute top-full left-1/2 z-20 mt-2 w-72 rounded-lg border border-gray-200 bg-white p-4 shadow-lg ${\n          open\n            ? `${styles.dropdownAnimation} visible opacity-100`\n            : 'invisible opacity-0'\n        }`}\n      >\n        {/* Year selector */}\n        <div className=\"bg-primary-50 mb-4 flex items-center justify-between rounded-md p-2\">\n          <button\n            onClick={() => setYear((Number(year) - 1).toString())}\n            className=\"flex items-center justify-center rounded-md p-1.5 text-gray-700 transition-all hover:bg-white\"\n          >\n            <BiChevronLeft className=\"size-5\" />\n          </button>\n\n          <span className=\"text-primary-700 text-lg font-bold\">{year}</span>\n\n          <button\n            onClick={() => setYear((Number(year) + 1).toString())}\n            className=\"flex items-center justify-center rounded-md p-1.5 text-gray-700 transition-all hover:bg-white\"\n          >\n            <BiChevronRight className=\"size-5\" />\n          </button>\n        </div>\n\n        {/* Month grid */}\n        <div className=\"grid grid-cols-4 gap-2\">\n          {Object.keys(MONTH_LABEL).map((monthLabel) => {\n            const isSelected = MONTH_LABEL[monthLabel] === month;\n            const isCurrentYearMonth =\n              new Date().getFullYear().toString() === year &&\n              MONTH_LABEL[monthLabel] ===\n                (new Date().getMonth() + 1).toString();\n\n            return (\n              <button\n                key={monthLabel}\n                onClick={() => {\n                  setMonth(MONTH_LABEL[monthLabel]);\n                  setOpen(false);\n                }}\n                className={`relative rounded-md px-2 py-2 text-center font-medium transition-all ${styles.monthButton} ${\n                  isSelected\n                    ? 'bg-primary-500 text-white'\n                    : 'hover:bg-primary-100 hover:text-primary-700 text-gray-700'\n                }`}\n              >\n                {monthLabel}\n                {isCurrentYearMonth && !isSelected && (\n                  <span className=\"bg-primary-500 absolute -top-1 -right-1 size-2 rounded-full\"></span>\n                )}\n              </button>\n            );\n          })}\n        </div>\n\n        {/* Quick actions */}\n        <div className=\"mt-4 flex justify-between border-t border-gray-100 pt-3\">\n          <button\n            onClick={() => {\n              // Go to previous year, same month\n              setYear((Number(year) - 1).toString());\n            }}\n            className=\"hover:text-primary-700 text-sm font-medium text-gray-600\"\n          >\n            去年同月\n          </button>\n\n          <button\n            onClick={() => {\n              const today = new Date();\n              setMonth((today.getMonth() + 1).toString());\n              setYear(today.getFullYear().toString());\n              setOpen(false);\n            }}\n            className=\"bg-primary-100 text-primary-700 hover:bg-primary-200 rounded-md px-3 py-1 text-sm font-medium\"\n          >\n            回到本月\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 389, "column": 0}, "map": {"version":3,"sources":["file:///Users/kw_yeh/Desktop/SpendingTracker/my-app/src/hooks/useScrollToTop.ts"],"sourcesContent":["import { useEffect } from \"react\";\n\nexport const useScrollToTop = () => {\n  useEffect(() => {\n    window.scrollTo(0, 0);\n  }, []);\n};\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,iBAAiB;IAC5B,IAAA,kNAAS,EAAC;QACR,OAAO,QAAQ,CAAC,GAAG;IACrB,GAAG,EAAE;AACP"}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"sources":["file:///Users/kw_yeh/Desktop/SpendingTracker/my-app/src/hooks/useYearMonth.ts"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\n\nexport const useYearMonth = (today: Date) => {\n  const [year, setYear] = useState(`${today.getFullYear()}`);\n  const [month, setMonth] = useState(`${today.getMonth() + 1}`);\n  return {\n    today: new Date(Number(year), Number(month) - 1),\n    year,\n    setYear,\n    month,\n    setMonth,\n  };\n};\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAIO,MAAM,eAAe,CAAC;IAC3B,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC,GAAG,MAAM,WAAW,IAAI;IACzD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC,GAAG,MAAM,QAAQ,KAAK,GAAG;IAC5D,OAAO;QACL,OAAO,IAAI,KAAK,OAAO,OAAO,OAAO,SAAS;QAC9C;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 426, "column": 0}, "map": {"version":3,"sources":["file:///Users/kw_yeh/Desktop/SpendingTracker/my-app/src/utils/calSpending2Chart.ts"],"sourcesContent":["import {\n  INCOME_TYPE_MAP,\n  Necessity,\n  OUTCOME_TYPE_MAP,\n  SpendingType,\n} from '@/utils/constants';\n\nexport const calSpending2Chart = (data: SpendingRecord[]): PieChartData => {\n  const {\n    incomeResult,\n    totalIncome,\n    necessaryIncome,\n    unnecessaryIncome,\n    outcomeResult,\n    totalOutcome,\n    necessaryOutcome,\n    unnecessaryOutcome,\n  } = parseData(data);\n\n  const {\n    results: incomeList,\n    necessaryList: incomeNecessaryList,\n    unnecessaryList: incomeUnnecessaryList,\n  } = getPieChartData(\n    INCOME_TYPE_MAP,\n    incomeResult,\n    '#82ca9d',\n    '#fdba74',\n    '#d1d5db',\n  );\n  const {\n    results: outcomeList,\n    necessaryList: outcomeNecessaryList,\n    unnecessaryList: outcomeUnnecessaryList,\n  } = getPieChartData(\n    OUTCOME_TYPE_MAP,\n    outcomeResult,\n    '#faa5a5',\n    '#fdba74',\n    '#d1d5db',\n  );\n\n  return {\n    income: {\n      total: totalIncome,\n      necessary: necessaryIncome,\n      unnecessary: unnecessaryIncome,\n      necessaryList: incomeNecessaryList,\n      unnecessaryList: incomeUnnecessaryList,\n      list: incomeList,\n    },\n    outcome: {\n      total: totalOutcome,\n      necessary: necessaryOutcome,\n      unnecessary: unnecessaryOutcome,\n      necessaryList: outcomeNecessaryList,\n      unnecessaryList: outcomeUnnecessaryList,\n      list: outcomeList,\n    },\n  };\n};\n\nconst getPieChartData = (\n  types: {\n    value: string;\n    label: string;\n  }[],\n  data: Map<string, ExpenseResult>,\n  resultColor: string,\n  necessaryColor: string,\n  unnecessaryColor: string,\n) => {\n  const results: Array<PieChartDataItem> = [];\n  const necessaryList: PieChartDataBase[] = [];\n  const unnecessaryList: PieChartDataBase[] = [];\n\n  types.forEach(({ label }) => {\n    const expenseData = data.get(label) ?? getEmptyResult();\n    results.push({\n      id: label,\n      name: label,\n      value: expenseData.total,\n      necessary: expenseData.necessary,\n      unnecessary: expenseData.unnecessary,\n      color: resultColor,\n    });\n    necessaryList.push({\n      name: label,\n      value: expenseData.necessaryList.reduce((acc, d) => acc + d, 0),\n      color: necessaryColor,\n    });\n    unnecessaryList.push({\n      name: label,\n      value: expenseData.unnecessaryList.reduce((acc, d) => acc + d, 0),\n      color: unnecessaryColor,\n    });\n  });\n  return { results, necessaryList, unnecessaryList };\n};\n\ntype ExpenseResult = {\n  necessary: number;\n  unnecessary: number;\n  necessaryList: number[];\n  unnecessaryList: number[];\n  total: number;\n};\n\nconst getEmptyResult = (): ExpenseResult => {\n  return {\n    necessary: 0,\n    unnecessary: 0,\n    necessaryList: [],\n    unnecessaryList: [],\n    total: 0,\n  };\n};\n\nconst parseData = (data: SpendingRecord[]) => {\n  const incomeResult: Map<string, ExpenseResult> = new Map();\n  let totalIncome = 0;\n  let necessaryIncome = 0;\n  let unnecessaryIncome = 0;\n  const outcomeResult: Map<string, ExpenseResult> = new Map();\n  let totalOutcome = 0;\n  let necessaryOutcome = 0;\n  let unnecessaryOutcome = 0;\n  data.forEach((record) => {\n    if (record.type === SpendingType.Income) {\n      const category = INCOME_TYPE_MAP.find((d) => d.value === record.category);\n      if (category) {\n        totalIncome += Number(record.amount);\n        let temp = incomeResult.get(category.label) ?? getEmptyResult();\n        if (record.necessity === Necessity.Need) {\n          necessaryIncome += Number(record.amount);\n          temp = {\n            ...temp,\n            necessary: temp.necessary + Number(record.amount),\n            necessaryList: [...temp.necessaryList, Number(record.amount)],\n          };\n        } else {\n          unnecessaryIncome += Number(record.amount);\n          temp = {\n            ...temp,\n            unnecessary: temp.unnecessary + Number(record.amount),\n            unnecessaryList: [...temp.unnecessaryList, Number(record.amount)],\n          };\n        }\n        incomeResult.set(category.label, {\n          ...temp,\n          total: temp.total + Number(record.amount),\n        });\n      }\n    } else {\n      const category = OUTCOME_TYPE_MAP.find(\n        (d) => d.value === record.category,\n      );\n      if (category) {\n        totalOutcome += Number(record.amount);\n        let temp = outcomeResult.get(category.label) ?? getEmptyResult();\n        if (record.necessity === Necessity.Need) {\n          necessaryOutcome += Number(record.amount);\n          temp = {\n            ...temp,\n            necessary: temp.necessary + Number(record.amount),\n            necessaryList: [...temp.necessaryList, Number(record.amount)],\n          };\n        } else {\n          unnecessaryOutcome += Number(record.amount);\n          temp = {\n            ...temp,\n            unnecessary: temp.unnecessary + Number(record.amount),\n            unnecessaryList: [...temp.unnecessaryList, Number(record.amount)],\n          };\n        }\n        outcomeResult.set(category.label, {\n          ...temp,\n          total: temp.total + Number(record.amount),\n        });\n      }\n    }\n  });\n  return {\n    incomeResult,\n    totalIncome,\n    necessaryIncome,\n    unnecessaryIncome,\n    outcomeResult,\n    totalOutcome,\n    necessaryOutcome,\n    unnecessaryOutcome,\n  };\n};\n"],"names":[],"mappings":";;;;AAAA;;AAOO,MAAM,oBAAoB,CAAC;IAChC,MAAM,EACJ,YAAY,EACZ,WAAW,EACX,eAAe,EACf,iBAAiB,EACjB,aAAa,EACb,YAAY,EACZ,gBAAgB,EAChB,kBAAkB,EACnB,GAAG,UAAU;IAEd,MAAM,EACJ,SAAS,UAAU,EACnB,eAAe,mBAAmB,EAClC,iBAAiB,qBAAqB,EACvC,GAAG,gBACF,4IAAe,EACf,cACA,WACA,WACA;IAEF,MAAM,EACJ,SAAS,WAAW,EACpB,eAAe,oBAAoB,EACnC,iBAAiB,sBAAsB,EACxC,GAAG,gBACF,6IAAgB,EAChB,eACA,WACA,WACA;IAGF,OAAO;QACL,QAAQ;YACN,OAAO;YACP,WAAW;YACX,aAAa;YACb,eAAe;YACf,iBAAiB;YACjB,MAAM;QACR;QACA,SAAS;YACP,OAAO;YACP,WAAW;YACX,aAAa;YACb,eAAe;YACf,iBAAiB;YACjB,MAAM;QACR;IACF;AACF;AAEA,MAAM,kBAAkB,CACtB,OAIA,MACA,aACA,gBACA;IAEA,MAAM,UAAmC,EAAE;IAC3C,MAAM,gBAAoC,EAAE;IAC5C,MAAM,kBAAsC,EAAE;IAE9C,MAAM,OAAO,CAAC,CAAC,EAAE,KAAK,EAAE;QACtB,MAAM,cAAc,KAAK,GAAG,CAAC,UAAU;QACvC,QAAQ,IAAI,CAAC;YACX,IAAI;YACJ,MAAM;YACN,OAAO,YAAY,KAAK;YACxB,WAAW,YAAY,SAAS;YAChC,aAAa,YAAY,WAAW;YACpC,OAAO;QACT;QACA,cAAc,IAAI,CAAC;YACjB,MAAM;YACN,OAAO,YAAY,aAAa,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,GAAG;YAC7D,OAAO;QACT;QACA,gBAAgB,IAAI,CAAC;YACnB,MAAM;YACN,OAAO,YAAY,eAAe,CAAC,MAAM,CAAC,CAAC,KAAK,IAAM,MAAM,GAAG;YAC/D,OAAO;QACT;IACF;IACA,OAAO;QAAE;QAAS;QAAe;IAAgB;AACnD;AAUA,MAAM,iBAAiB;IACrB,OAAO;QACL,WAAW;QACX,aAAa;QACb,eAAe,EAAE;QACjB,iBAAiB,EAAE;QACnB,OAAO;IACT;AACF;AAEA,MAAM,YAAY,CAAC;IACjB,MAAM,eAA2C,IAAI;IACrD,IAAI,cAAc;IAClB,IAAI,kBAAkB;IACtB,IAAI,oBAAoB;IACxB,MAAM,gBAA4C,IAAI;IACtD,IAAI,eAAe;IACnB,IAAI,mBAAmB;IACvB,IAAI,qBAAqB;IACzB,KAAK,OAAO,CAAC,CAAC;QACZ,IAAI,OAAO,IAAI,KAAK,yIAAY,CAAC,MAAM,EAAE;YACvC,MAAM,WAAW,4IAAe,CAAC,IAAI,CAAC,CAAC,IAAM,EAAE,KAAK,KAAK,OAAO,QAAQ;YACxE,IAAI,UAAU;gBACZ,eAAe,OAAO,OAAO,MAAM;gBACnC,IAAI,OAAO,aAAa,GAAG,CAAC,SAAS,KAAK,KAAK;gBAC/C,IAAI,OAAO,SAAS,KAAK,sIAAS,CAAC,IAAI,EAAE;oBACvC,mBAAmB,OAAO,OAAO,MAAM;oBACvC,OAAO;wBACL,GAAG,IAAI;wBACP,WAAW,KAAK,SAAS,GAAG,OAAO,OAAO,MAAM;wBAChD,eAAe;+BAAI,KAAK,aAAa;4BAAE,OAAO,OAAO,MAAM;yBAAE;oBAC/D;gBACF,OAAO;oBACL,qBAAqB,OAAO,OAAO,MAAM;oBACzC,OAAO;wBACL,GAAG,IAAI;wBACP,aAAa,KAAK,WAAW,GAAG,OAAO,OAAO,MAAM;wBACpD,iBAAiB;+BAAI,KAAK,eAAe;4BAAE,OAAO,OAAO,MAAM;yBAAE;oBACnE;gBACF;gBACA,aAAa,GAAG,CAAC,SAAS,KAAK,EAAE;oBAC/B,GAAG,IAAI;oBACP,OAAO,KAAK,KAAK,GAAG,OAAO,OAAO,MAAM;gBAC1C;YACF;QACF,OAAO;YACL,MAAM,WAAW,6IAAgB,CAAC,IAAI,CACpC,CAAC,IAAM,EAAE,KAAK,KAAK,OAAO,QAAQ;YAEpC,IAAI,UAAU;gBACZ,gBAAgB,OAAO,OAAO,MAAM;gBACpC,IAAI,OAAO,cAAc,GAAG,CAAC,SAAS,KAAK,KAAK;gBAChD,IAAI,OAAO,SAAS,KAAK,sIAAS,CAAC,IAAI,EAAE;oBACvC,oBAAoB,OAAO,OAAO,MAAM;oBACxC,OAAO;wBACL,GAAG,IAAI;wBACP,WAAW,KAAK,SAAS,GAAG,OAAO,OAAO,MAAM;wBAChD,eAAe;+BAAI,KAAK,aAAa;4BAAE,OAAO,OAAO,MAAM;yBAAE;oBAC/D;gBACF,OAAO;oBACL,sBAAsB,OAAO,OAAO,MAAM;oBAC1C,OAAO;wBACL,GAAG,IAAI;wBACP,aAAa,KAAK,WAAW,GAAG,OAAO,OAAO,MAAM;wBACpD,iBAAiB;+BAAI,KAAK,eAAe;4BAAE,OAAO,OAAO,MAAM;yBAAE;oBACnE;gBACF;gBACA,cAAc,GAAG,CAAC,SAAS,KAAK,EAAE;oBAChC,GAAG,IAAI;oBACP,OAAO,KAAK,KAAK,GAAG,OAAO,OAAO,MAAM;gBAC1C;YACF;QACF;IACF;IACA,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA;QACA;IACF;AACF"}},
    {"offset": {"line": 584, "column": 0}, "map": {"version":3,"sources":["file:///Users/kw_yeh/Desktop/SpendingTracker/my-app/src/utils/normalizeNumber.ts"],"sourcesContent":["\"use client\";\nexport const normalizeNumber = (num: number) => {\n  const res: string[] = [];\n  const digitList = num.toString().split(\"\").reverse();\n  let count = 0;\n  digitList.forEach((digit) => {\n    if (count !== 0 && count % 3 === 0 && isNumber(digit)) {\n      res.push(\",\");\n    }\n    res.push(digit);\n    count++;\n  });\n  return res.toReversed().join(\"\");\n};\n\nfunction isNumber(val: string) {\n  return /^\\d+$/.test(val);\n}\n"],"names":[],"mappings":";;;;AAAA;AACO,MAAM,kBAAkB,CAAC;IAC9B,MAAM,MAAgB,EAAE;IACxB,MAAM,YAAY,IAAI,QAAQ,GAAG,KAAK,CAAC,IAAI,OAAO;IAClD,IAAI,QAAQ;IACZ,UAAU,OAAO,CAAC,CAAC;QACjB,IAAI,UAAU,KAAK,QAAQ,MAAM,KAAK,SAAS,QAAQ;YACrD,IAAI,IAAI,CAAC;QACX;QACA,IAAI,IAAI,CAAC;QACT;IACF;IACA,OAAO,IAAI,UAAU,GAAG,IAAI,CAAC;AAC/B;AAEA,SAAS,SAAS,GAAW;IAC3B,OAAO,QAAQ,IAAI,CAAC;AACtB"}},
    {"offset": {"line": 609, "column": 0}, "map": {"version":3,"sources":["file:///Users/kw_yeh/Desktop/SpendingTracker/my-app/src/app/analysis/CostTable.tsx"],"sourcesContent":["import { normalizeNumber } from '@/utils/normalizeNumber';\n\nexport const CostTable = ({\n  title,\n  total,\n  list,\n  options = {\n    headerStyle: 'bg-gray-200',\n  },\n}: {\n  title: string;\n  total: number;\n  list: { name: string; value: number }[];\n  options?: Partial<{\n    headerStyle: string;\n  }>;\n}) => {\n  return (\n    <div className=\"flex w-full flex-col gap-2 whitespace-nowrap\">\n      <h3 className=\"font-semibold\">{title}</h3>\n      <table className=\"w-full border-collapse text-sm\">\n        <thead>\n          <tr className={options.headerStyle}>\n            <th className=\"border border-solid border-gray-300 border-r-transparent px-2 py-1 text-center\">\n              類型\n            </th>\n            <th className=\"border border-solid border-gray-300 border-r-transparent px-2 py-1 text-right\">\n              比例 (%)\n            </th>\n            <th className=\"border border-solid border-gray-300 px-2 py-1 text-right\">\n              金額 (NTD)\n            </th>\n          </tr>\n        </thead>\n        <tbody>\n          {list.map((item) => (\n            <tr\n              key={`income-${item.name}`}\n              className={item.value === 0 ? 'text-gray-300' : ''}\n            >\n              <td className=\"col-span-1 border border-solid border-gray-300 p-2 text-center\">\n                {item.name}\n              </td>\n              <td className=\"col-span-1 border border-solid border-gray-300 p-2 text-end\">\n                {item.value === 0\n                  ? 0\n                  : (Math.round((item.value / total) * 100) || 0).toFixed(0)}\n                %\n              </td>\n              <td className=\"col-span-2 border border-solid border-gray-300 p-2 text-end\">\n                ${normalizeNumber(item.value)}\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAAA;;;AAEO,MAAM,YAAY,CAAC,EACxB,KAAK,EACL,KAAK,EACL,IAAI,EACJ,UAAU;IACR,aAAa;AACf,CAAC,EAQF;IACC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAiB;;;;;;0BAC/B,8OAAC;gBAAM,WAAU;;kCACf,8OAAC;kCACC,cAAA,8OAAC;4BAAG,WAAW,QAAQ,WAAW;;8CAChC,8OAAC;oCAAG,WAAU;8CAAiF;;;;;;8CAG/F,8OAAC;oCAAG,WAAU;8CAAgF;;;;;;8CAG9F,8OAAC;oCAAG,WAAU;8CAA2D;;;;;;;;;;;;;;;;;kCAK7E,8OAAC;kCACE,KAAK,GAAG,CAAC,CAAC,qBACT,8OAAC;gCAEC,WAAW,KAAK,KAAK,KAAK,IAAI,kBAAkB;;kDAEhD,8OAAC;wCAAG,WAAU;kDACX,KAAK,IAAI;;;;;;kDAEZ,8OAAC;wCAAG,WAAU;;4CACX,KAAK,KAAK,KAAK,IACZ,IACA,CAAC,KAAK,KAAK,CAAC,AAAC,KAAK,KAAK,GAAG,QAAS,QAAQ,CAAC,EAAE,OAAO,CAAC;4CAAG;;;;;;;kDAG/D,8OAAC;wCAAG,WAAU;;4CAA8D;4CACxE,IAAA,kJAAe,EAAC,KAAK,KAAK;;;;;;;;+BAbzB,CAAC,OAAO,EAAE,KAAK,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;AAqBxC"}},
    {"offset": {"line": 735, "column": 0}, "map": {"version":3,"sources":["file:///Users/kw_yeh/Desktop/SpendingTracker/my-app/src/app/analysis/ExpenseCostTable.tsx"],"sourcesContent":["'use client';\n\nimport { normalizeNumber } from '@/utils/normalizeNumber';\nimport { CostTable } from './CostTable';\nimport { useEffect, useMemo, useState } from 'react';\nimport { INCOME_TYPE_MAP, OUTCOME_TYPE_MAP } from '@/utils/constants';\n\ninterface Props {\n  totalIncome: number;\n  totalOutcome: number;\n  incomeList: PieChartDataItem[];\n  outcomeList: PieChartDataItem[];\n}\n\nconst defaultOutcomeList = OUTCOME_TYPE_MAP.map(({ label: category }) => ({\n  name: category,\n  value: 0,\n}));\n\nconst defaultIncomeList = INCOME_TYPE_MAP.map(({ label: category }) => ({\n  name: category,\n  value: 0,\n}));\n\nconst ExpenseCostTable = (props: Props) => {\n  const [outcomeList, setOutcomeList] =\n    useState<Array<{ name: string; value: number }>>(defaultOutcomeList);\n  const [incomeList, setIncomeList] =\n    useState<Array<{ name: string; value: number }>>(defaultIncomeList);\n\n  const total = useMemo(\n    () => props.totalIncome + props.totalOutcome,\n    [props.totalIncome, props.totalOutcome],\n  );\n\n  const outcomePercentage = useMemo(\n    () => (props.totalOutcome * 100) / (total || 100),\n    [props.totalOutcome, total],\n  );\n\n  const incomePercentage = useMemo(\n    () => (props.totalIncome * 100) / (total || 100),\n    [props.totalIncome, total],\n  );\n\n  useEffect(() => {\n    if (props.outcomeList.length > 0) {\n      setOutcomeList((prevState) =>\n        prevState.map((_d, index) => ({\n          ..._d,\n          value: props.outcomeList[index].value,\n        })),\n      );\n    }\n  }, [props.outcomeList]);\n\n  useEffect(() => {\n    if (props.incomeList.length > 0) {\n      setIncomeList((prevState) =>\n        prevState.map((_d, index) => ({\n          ..._d,\n          value: props.incomeList[index].value,\n        })),\n      );\n    }\n  }, [props.incomeList]);\n\n  return (\n    <>\n      <CostTable\n        title={`支出各項資訊 $${normalizeNumber(props.totalOutcome)}（${outcomePercentage.toFixed(0)}%）`}\n        total={props.totalOutcome}\n        list={outcomeList}\n        options={{\n          headerStyle: 'bg-red-500/30',\n        }}\n      />\n      <CostTable\n        title={`收入各項資訊 $${normalizeNumber(props.totalIncome)}（${incomePercentage.toFixed(0)}%）`}\n        total={props.totalIncome}\n        list={incomeList}\n        options={{\n          headerStyle: 'bg-green-500/30',\n        }}\n      />\n    </>\n  );\n};\n\nexport default ExpenseCostTable;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAcA,MAAM,qBAAqB,6IAAgB,CAAC,GAAG,CAAC,CAAC,EAAE,OAAO,QAAQ,EAAE,GAAK,CAAC;QACxE,MAAM;QACN,OAAO;IACT,CAAC;AAED,MAAM,oBAAoB,4IAAe,CAAC,GAAG,CAAC,CAAC,EAAE,OAAO,QAAQ,EAAE,GAAK,CAAC;QACtE,MAAM;QACN,OAAO;IACT,CAAC;AAED,MAAM,mBAAmB,CAAC;IACxB,MAAM,CAAC,aAAa,eAAe,GACjC,IAAA,iNAAQ,EAAyC;IACnD,MAAM,CAAC,YAAY,cAAc,GAC/B,IAAA,iNAAQ,EAAyC;IAEnD,MAAM,QAAQ,IAAA,gNAAO,EACnB,IAAM,MAAM,WAAW,GAAG,MAAM,YAAY,EAC5C;QAAC,MAAM,WAAW;QAAE,MAAM,YAAY;KAAC;IAGzC,MAAM,oBAAoB,IAAA,gNAAO,EAC/B,IAAM,AAAC,MAAM,YAAY,GAAG,MAAO,CAAC,SAAS,GAAG,GAChD;QAAC,MAAM,YAAY;QAAE;KAAM;IAG7B,MAAM,mBAAmB,IAAA,gNAAO,EAC9B,IAAM,AAAC,MAAM,WAAW,GAAG,MAAO,CAAC,SAAS,GAAG,GAC/C;QAAC,MAAM,WAAW;QAAE;KAAM;IAG5B,IAAA,kNAAS,EAAC;QACR,IAAI,MAAM,WAAW,CAAC,MAAM,GAAG,GAAG;YAChC,eAAe,CAAC,YACd,UAAU,GAAG,CAAC,CAAC,IAAI,QAAU,CAAC;wBAC5B,GAAG,EAAE;wBACL,OAAO,MAAM,WAAW,CAAC,MAAM,CAAC,KAAK;oBACvC,CAAC;QAEL;IACF,GAAG;QAAC,MAAM,WAAW;KAAC;IAEtB,IAAA,kNAAS,EAAC;QACR,IAAI,MAAM,UAAU,CAAC,MAAM,GAAG,GAAG;YAC/B,cAAc,CAAC,YACb,UAAU,GAAG,CAAC,CAAC,IAAI,QAAU,CAAC;wBAC5B,GAAG,EAAE;wBACL,OAAO,MAAM,UAAU,CAAC,MAAM,CAAC,KAAK;oBACtC,CAAC;QAEL;IACF,GAAG;QAAC,MAAM,UAAU;KAAC;IAErB,qBACE;;0BACE,8OAAC,iJAAS;gBACR,OAAO,CAAC,QAAQ,EAAE,IAAA,kJAAe,EAAC,MAAM,YAAY,EAAE,CAAC,EAAE,kBAAkB,OAAO,CAAC,GAAG,EAAE,CAAC;gBACzF,OAAO,MAAM,YAAY;gBACzB,MAAM;gBACN,SAAS;oBACP,aAAa;gBACf;;;;;;0BAEF,8OAAC,iJAAS;gBACR,OAAO,CAAC,QAAQ,EAAE,IAAA,kJAAe,EAAC,MAAM,WAAW,EAAE,CAAC,EAAE,iBAAiB,OAAO,CAAC,GAAG,EAAE,CAAC;gBACvF,OAAO,MAAM,WAAW;gBACxB,MAAM;gBACN,SAAS;oBACP,aAAa;gBACf;;;;;;;;AAIR;uCAEe"}},
    {"offset": {"line": 827, "column": 0}, "map": {"version":3,"sources":["file:///Users/kw_yeh/Desktop/SpendingTracker/my-app/src/app/analysis/NecessityCostTable.tsx"],"sourcesContent":["'use client';\n\nimport { OUTCOME_TYPE_MAP } from '@/utils/constants';\nimport { normalizeNumber } from '@/utils/normalizeNumber';\nimport { useEffect, useMemo, useState } from 'react';\nimport { CostTable } from './CostTable';\n\ninterface Props {\n  totalNecessary: number;\n  totalUnnecessary: number;\n  necessaryList: {\n    name: string;\n    value: number;\n    color: string;\n  }[];\n  unnecessaryList: {\n    name: string;\n    value: number;\n    color: string;\n  }[];\n}\n\nconst defaultNecessaryList = OUTCOME_TYPE_MAP.map(({ label: category }) => ({\n  name: category,\n  value: 0,\n}));\n\nconst NecessityCostTable = (props: Props) => {\n  const [necessaryList, setNecessaryList] =\n    useState<Array<{ name: string; value: number }>>(defaultNecessaryList);\n  const [unnecessaryList, setUnnecessaryList] =\n    useState<Array<{ name: string; value: number }>>(defaultNecessaryList);\n\n  const total = useMemo(\n    () => props.totalNecessary + props.totalUnnecessary,\n    [props.totalNecessary, props.totalUnnecessary],\n  );\n\n  const unnecessaryPercentage = useMemo(\n    () => (props.totalUnnecessary * 100) / (total || 100),\n    [props.totalUnnecessary, total],\n  );\n\n  const necessaryPercentage = useMemo(\n    () => (props.totalNecessary * 100) / (total || 100),\n    [props.totalNecessary, total],\n  );\n\n  useEffect(() => {\n    if (props.unnecessaryList.length > 0) {\n      setUnnecessaryList((prevState) =>\n        prevState.map((_d, index) => ({\n          ..._d,\n          value: props.unnecessaryList[index].value,\n        })),\n      );\n    }\n  }, [props.unnecessaryList]);\n\n  useEffect(() => {\n    if (props.necessaryList.length > 0) {\n      setNecessaryList((prevState) =>\n        prevState.map((_d, index) => ({\n          ..._d,\n          value: props.necessaryList[index].value,\n        })),\n      );\n    }\n  }, [props.necessaryList]);\n  return (\n    <>\n      <CostTable\n        title={`必要支出各項資訊 $${normalizeNumber(props.totalNecessary)}（${necessaryPercentage.toFixed(0)}%）`}\n        total={props.totalNecessary}\n        list={necessaryList}\n        options={{\n          headerStyle: 'bg-orange-500/30',\n        }}\n      />\n      <CostTable\n        title={`額外支出各項資訊 $${normalizeNumber(props.totalUnnecessary)}（${unnecessaryPercentage.toFixed(0)}%）`}\n        total={props.totalUnnecessary}\n        list={unnecessaryList}\n        options={{\n          headerStyle: 'bg-gray-500/30',\n        }}\n      />\n    </>\n  );\n};\n\nexport default NecessityCostTable;\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAsBA,MAAM,uBAAuB,6IAAgB,CAAC,GAAG,CAAC,CAAC,EAAE,OAAO,QAAQ,EAAE,GAAK,CAAC;QAC1E,MAAM;QACN,OAAO;IACT,CAAC;AAED,MAAM,qBAAqB,CAAC;IAC1B,MAAM,CAAC,eAAe,iBAAiB,GACrC,IAAA,iNAAQ,EAAyC;IACnD,MAAM,CAAC,iBAAiB,mBAAmB,GACzC,IAAA,iNAAQ,EAAyC;IAEnD,MAAM,QAAQ,IAAA,gNAAO,EACnB,IAAM,MAAM,cAAc,GAAG,MAAM,gBAAgB,EACnD;QAAC,MAAM,cAAc;QAAE,MAAM,gBAAgB;KAAC;IAGhD,MAAM,wBAAwB,IAAA,gNAAO,EACnC,IAAM,AAAC,MAAM,gBAAgB,GAAG,MAAO,CAAC,SAAS,GAAG,GACpD;QAAC,MAAM,gBAAgB;QAAE;KAAM;IAGjC,MAAM,sBAAsB,IAAA,gNAAO,EACjC,IAAM,AAAC,MAAM,cAAc,GAAG,MAAO,CAAC,SAAS,GAAG,GAClD;QAAC,MAAM,cAAc;QAAE;KAAM;IAG/B,IAAA,kNAAS,EAAC;QACR,IAAI,MAAM,eAAe,CAAC,MAAM,GAAG,GAAG;YACpC,mBAAmB,CAAC,YAClB,UAAU,GAAG,CAAC,CAAC,IAAI,QAAU,CAAC;wBAC5B,GAAG,EAAE;wBACL,OAAO,MAAM,eAAe,CAAC,MAAM,CAAC,KAAK;oBAC3C,CAAC;QAEL;IACF,GAAG;QAAC,MAAM,eAAe;KAAC;IAE1B,IAAA,kNAAS,EAAC;QACR,IAAI,MAAM,aAAa,CAAC,MAAM,GAAG,GAAG;YAClC,iBAAiB,CAAC,YAChB,UAAU,GAAG,CAAC,CAAC,IAAI,QAAU,CAAC;wBAC5B,GAAG,EAAE;wBACL,OAAO,MAAM,aAAa,CAAC,MAAM,CAAC,KAAK;oBACzC,CAAC;QAEL;IACF,GAAG;QAAC,MAAM,aAAa;KAAC;IACxB,qBACE;;0BACE,8OAAC,iJAAS;gBACR,OAAO,CAAC,UAAU,EAAE,IAAA,kJAAe,EAAC,MAAM,cAAc,EAAE,CAAC,EAAE,oBAAoB,OAAO,CAAC,GAAG,EAAE,CAAC;gBAC/F,OAAO,MAAM,cAAc;gBAC3B,MAAM;gBACN,SAAS;oBACP,aAAa;gBACf;;;;;;0BAEF,8OAAC,iJAAS;gBACR,OAAO,CAAC,UAAU,EAAE,IAAA,kJAAe,EAAC,MAAM,gBAAgB,EAAE,CAAC,EAAE,sBAAsB,OAAO,CAAC,GAAG,EAAE,CAAC;gBACnG,OAAO,MAAM,gBAAgB;gBAC7B,MAAM;gBACN,SAAS;oBACP,aAAa;gBACf;;;;;;;;AAIR;uCAEe"}},
    {"offset": {"line": 915, "column": 0}, "map": {"version":3,"sources":["file:///Users/kw_yeh/Desktop/SpendingTracker/my-app/src/app/analysis/ChartBlock.tsx"],"sourcesContent":["'use client';\n\nimport { ChartContainer } from '@/app/analysis/ChartContainer';\nimport { YearMonthFilter } from '@/app/analysis/YearMonthFilter';\nimport { useGroupCtx } from '@/context/GroupProvider';\nimport { useGetSpendingCtx } from '@/context/SpendingProvider';\nimport { useUserConfigCtx } from '@/context/UserConfigProvider';\nimport { useScrollToTop } from '@/hooks/useScrollToTop';\nimport { useYearMonth } from '@/hooks/useYearMonth';\nimport { calSpending2Chart } from '@/utils/calSpending2Chart';\nimport { getStartEndOfMonth } from '@/utils/getStartEndOfMonth';\nimport dynamic from 'next/dynamic';\nimport { startTransition, useCallback, useEffect, useState } from 'react';\nimport ExpenseCostTable from './ExpenseCostTable';\nimport NecessityCostTable from './NecessityCostTable';\n\nconst ExpensePieChart = dynamic(() => import('./ExpensePieChart'), {\n  ssr: false,\n  loading: () => (\n    <div className=\"mx-auto mt-15 aspect-square size-45 rounded-full bg-gray-200 p-1.5\">\n      <div className=\"bg-background size-full rounded-full p-1.5\">\n        <div className=\"size-full rounded-full bg-gray-200 p-5\">\n          <div className=\"bg-background size-full rounded-full\"></div>\n        </div>\n      </div>\n    </div>\n  ),\n});\n\nconst NecessityPieChart = dynamic(() => import('./NecessityPieChart'), {\n  ssr: false,\n  loading: () => (\n    <div className=\"mx-auto mt-15 aspect-square size-45 rounded-full bg-gray-200 p-1.5\">\n      <div className=\"bg-background size-full rounded-full p-1.5\">\n        <div className=\"size-full rounded-full bg-gray-200 p-5\">\n          <div className=\"bg-background size-full rounded-full\"></div>\n        </div>\n      </div>\n    </div>\n  ),\n});\n\nexport const ChartBlock = () => {\n  useScrollToTop();\n  const { config: userData } = useUserConfigCtx();\n  const { data, syncData } = useGetSpendingCtx();\n  const { currentGroup } = useGroupCtx();\n  const [chartData, setChartData] = useState<PieChartData>({\n    income: {\n      list: [],\n      total: 100,\n      necessary: 50,\n      unnecessary: 50,\n      necessaryList: [],\n      unnecessaryList: [],\n    },\n    outcome: {\n      list: [],\n      total: 50,\n      necessary: 25,\n      unnecessary: 25,\n      necessaryList: [],\n      unnecessaryList: [],\n    },\n  });\n  const today = new Date();\n  const dateHook = useYearMonth(today);\n\n  const refreshData = useCallback(\n    (_groupId: string | undefined, _year: string, _month: string) => {\n      const { startDate, endDate } = getStartEndOfMonth(\n        new Date(Number(_year), Number(_month) - 1),\n      );\n      syncData(\n        _groupId,\n        userData?.email,\n        startDate.toISOString(),\n        endDate.toISOString(),\n      );\n    },\n    [syncData, userData?.email],\n  );\n\n  useEffect(() => {\n    startTransition(() => {\n      const filteredData = data.filter(\n        (record) =>\n          `${new Date(record.date).getFullYear()}` === dateHook.year &&\n          `${new Date(record.date).getMonth() + 1}` === dateHook.month,\n      );\n      setChartData(calSpending2Chart(filteredData));\n    });\n  }, [data, dateHook.year, dateHook.month]);\n\n  return (\n    <div className=\"content-wrapper\">\n      <YearMonthFilter\n        refreshData={refreshData}\n        group={currentGroup}\n        dateOptions={dateHook}\n        className=\"flex self-center rounded-lg border border-gray-200 bg-white p-2 text-base shadow-sm\"\n      />\n\n      <div className=\"flex w-full flex-col items-center gap-8 md:flex-row md:items-start\">\n        <ChartContainer title=\"收支類別比例\">\n          <div className=\"flex w-full flex-wrap justify-center gap-4\">\n            <div className=\"size-75\">\n              <ExpensePieChart\n                totalIncome={chartData.income.total}\n                totalOutcome={chartData.outcome.total}\n                list={[...chartData.outcome.list, ...chartData.income.list]}\n              />\n            </div>\n            <div className=\"flex flex-1 flex-col gap-4\">\n              <ExpenseCostTable\n                totalIncome={chartData.income.total}\n                totalOutcome={chartData.outcome.total}\n                incomeList={chartData.income.list}\n                outcomeList={chartData.outcome.list}\n              />\n            </div>\n          </div>\n        </ChartContainer>\n\n        <ChartContainer title=\"支出類別比例（必要 vs 額外）\">\n          <div className=\"flex w-full flex-wrap justify-center gap-4\">\n            <div className=\"size-75\">\n              <NecessityPieChart\n                totalNecessity={chartData.outcome.necessary}\n                totalUnnecessity={chartData.outcome.unnecessary}\n                list={[\n                  ...chartData.outcome.necessaryList,\n                  ...chartData.outcome.unnecessaryList,\n                ]}\n              />\n            </div>\n            <div className=\"flex flex-1 flex-col gap-4\">\n              <NecessityCostTable\n                totalNecessary={chartData.outcome.necessary}\n                totalUnnecessary={chartData.outcome.unnecessary}\n                necessaryList={chartData.outcome.necessaryList}\n                unnecessaryList={chartData.outcome.unnecessaryList}\n              />\n            </div>\n          </div>\n        </ChartContainer>\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}}]
}