(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73886,e=>{"use strict";e.s(["normalizeNumber",0,e=>{let t=Math.floor(e).toString(),r=[],a=t.split("").reverse(),s=0;return a.forEach(e=>{0!==s&&s%3==0&&r.push(","),r.push(e),s++}),r.toReversed().join("")}])},40141,e=>{"use strict";var t=e.i(71645),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=t.default.createContext&&t.default.createContext(r),s=["attr","size","title"];function n(){return(n=Object.assign.bind()).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var a,s,n;a=e,s=t,n=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):a[s]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e){return r=>t.default.createElement(c,n({attr:l({},e.attr)},r),function e(r){return r&&r.map((r,a)=>t.default.createElement(r.tag,l({key:a},r.attr),e(r.child)))}(e.child))}function c(e){var i=r=>{var a,{attr:i,size:o,title:c}=e,u=function(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(a=0;a<n.length;a++)r=n[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,s),d=o||r.size||"1em";return r.className&&(a=r.className),e.className&&(a=(a?a+" ":"")+e.className),t.default.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,u,{className:a,style:l(l({color:e.color||r.color},r.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),c&&t.default.createElement("title",null,c),e.children)};return void 0!==a?t.default.createElement(a.Consumer,null,e=>i(e)):i(r)}e.s(["GenIcon",()=>o],40141)},3995,e=>{"use strict";var t=e.i(43476);e.s(["CalendarIcon",0,e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-calendar-event",viewBox:"0 0 16 16",...e,children:[(0,t.jsx)("path",{d:"M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5z"}),(0,t.jsx)("path",{d:"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"})]})])},44970,e=>{"use strict";var t=e.i(6705);e.s(["getExpenseFromData",0,e=>{let r=0,a=0;return e.forEach(e=>{e.type===t.SpendingType.Income?r+=Number(e.amount):a+=Number(e.amount)}),{totalIncome:r,totalOutcome:a}}])},1550,e=>{"use strict";let t="/api/aurora/budgets",r=async e=>{try{if(!e)return{status:!1,data:null,message:"缺少帳本 ID"};let r=await fetch(`${t}?account_id=${e}`).then(e=>e.json());return{status:!0,data:r,message:"success"}}catch(e){return console.error(e),{status:!1,data:null,message:"發生不預期的錯誤"}}},a=async e=>{try{let r=await fetch(t,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(e=>e.json());return{status:!0,data:r,message:"success"}}catch(e){return console.error(e),{status:!1,message:"發生不預期的錯誤"}}},s=async e=>{try{return await fetch(`${t}?account_id=${e}`,{method:"DELETE"}),{status:!0,message:"success"}}catch(e){return console.error(e),{status:!1,message:"發生不預期的錯誤"}}};e.s(["deleteBudget",0,s,"getBudget",0,r,"putBudget",0,a])},67585,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let a=e.r(32061);function s({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new a.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},9885,(e,t,r)=>{"use strict";function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return a}})},52157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return l}});let a=e.r(43476),s=e.r(74080),n=e.r(63599),i=e.r(9885);function l({moduleIds:e}){if("undefined"!=typeof window)return null;let t=n.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let a=t.reactLoadableManifest;for(let t of e){if(!a[t])continue;let e=a[t].files;r.push(...e)}}return 0===r.length?null:(0,a.jsx)(a.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,i.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,s.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},69093,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return c}});let a=e.r(43476),s=e.r(71645),n=e.r(67585),i=e.r(52157);function l(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},c=function(e){let t={...o,...e},r=(0,s.lazy)(()=>t.loader().then(l)),c=t.loading;function u(e){let l=c?(0,a.jsx)(c,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,u=o?s.Suspense:s.Fragment,d=t.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(i.PreloadChunks,{moduleIds:t.modules}):null,(0,a.jsx)(r,{...e})]}):(0,a.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(r,{...e})});return(0,a.jsx)(u,{...o?{fallback:l}:{},children:d})}return u.displayName="LoadableComponent",u}},70703,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return s}});let a=e.r(55682)._(e.r(69093));function s(e,t){let r={};"function"==typeof e&&(r.loader=e);let s={...r,...t};return(0,a.default)({...s,modules:s.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},15843,e=>{"use strict";var t=e.i(43476);e.s(["DeleteIcon",0,e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash",viewBox:"0 0 16 16",...e,children:[(0,t.jsx)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),(0,t.jsx)("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"})]})])},76497,97246,e=>{"use strict";var t=e.i(43476);let r=e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots",viewBox:"0 0 16 16",...e,children:(0,t.jsx)("path",{d:"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"})});var a=e.i(47573),s=e.i(71645);e.s(["ActionMenu",0,e=>{let{options:n,onClick:i}=e,[l,o]=(0,s.useState)(!1),c=(0,a.default)(()=>{o(!1)});return(0,t.jsxs)("div",{ref:c,className:"relative",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{o(e=>!e)},className:`rounded-full p-2 transition-colors ${l?"bg-gray-300":"hover:bg-gray-300 active:bg-gray-300"}`,children:(0,t.jsx)(r,{className:"size-4"})}),(0,t.jsx)("div",{className:`bg-background absolute top-full right-3 z-30 flex w-fit flex-col rounded-lg p-2 shadow transition-all ${l?"opacity-100":"hidden opacity-0"}`,children:n.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{i&&i(e.value)},className:`group flex items-center gap-2 rounded px-4 py-2 whitespace-nowrap transition-colors hover:bg-gray-100 active:bg-gray-100 ${e.className??""}`,children:e.label},e.value))})]})}],76497),e.s(["EditIcon",0,e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-pen",viewBox:"0 0 16 16",...e,children:(0,t.jsx)("path",{d:"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001m-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708z"})})],97246)},48702,e=>{"use strict";var t=e.i(43476),r=e.i(76497),a=e.i(15843),s=e.i(97246),n=e.i(61500),i=e.i(39287),l=e.i(6705),o=e.i(63229),c=e.i(68559),u=e.i(73886),d=e.i(22016),f=e.i(18566),p=e.i(71645);e.s(["SpendingItem",0,e=>{let{spending:m,refreshData:h}=e,{config:g}=(0,n.useUserConfigCtx)(),[y,b]=(0,p.useState)(!1),x=(0,f.useRouter)(),v=(0,p.useMemo)(()=>g?.email===m["user-token"],[g?.email,m]),j=(0,p.useMemo)(()=>(0,c.getSpendingCategoryMap)(m.type),[m.type]),w=(0,p.useMemo)(()=>j.find(e=>e.value===m.category),[j,m.category]),O=(0,p.useMemo)(()=>y?"shadow-[0_0_0_2px_hsl(20,80%,70%)]":"active:bg-gray-100 hover:bg-gray-100",[y]),N=(0,p.useCallback)(()=>{confirm("確定要刪除這筆資料嗎?")&&(b(!0),(0,i.deleteItem)(m.id).then(()=>{(0,p.startTransition)(()=>{b(!1),h()})}))},[h,m.id]),P=(0,p.useCallback)(e=>{"delete"===e?N():"edit"===e&&x.push(`/edit?id=${m.id}`)},[N,x,m.id]),C=(0,p.useMemo)(()=>{let e=new Date(m.date),t=e.getHours(),r=e.getMinutes().toString().padStart(2,"0");return{period:t>=12?"PM":"AM",time:`${t%12||12}:${r}`}},[m.date]);return(0,t.jsxs)("div",{className:`relative flex items-center gap-2 rounded-lg bg-gray-50 p-2 text-sm transition-all sm:text-base md:p-3 ${O}`,children:[y&&(0,t.jsx)("span",{className:"absolute top-0 left-1 -translate-y-1/2 rounded-full bg-red-300 px-2 py-0.5 text-xs font-bold text-white",children:"刪除中"}),w&&(0,t.jsx)("span",{title:l.CATEGORY_WORDING_MAP[w.value],className:"flex size-6 items-center justify-center rounded-md",children:(0,o.getCategoryIcon)(w.value,`size-5 ${m.necessity===l.Necessity.Need?"text-primary-500":"text-gray-500"}`)}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-0.5 overflow-hidden",children:[(0,t.jsx)("div",{title:m.description,className:"overflow-hidden text-ellipsis whitespace-nowrap font-medium",children:m.description}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"rounded bg-gray-300 px-1.5 py-0.5 text-xs font-medium text-gray-600",children:C.period}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:C.time})]})]}),(0,t.jsxs)("div",{className:`w-fit text-end font-bold ${m.type===l.SpendingType.Outcome?"text-red-500":"text-green-500"}`,children:["$",(0,u.normalizeNumber)(Number(m.amount))]}),v&&(0,t.jsx)(r.ActionMenu,{onClick:P,options:[{value:"edit",label:(0,t.jsxs)(d.default,{href:`/edit?id=${m.id}`,className:"text-text group-hover:text-primary-500 group-active:text-primary-500 flex items-center gap-3 rounded px-2 py-1 transition-colors",children:[(0,t.jsx)(s.EditIcon,{className:"size-3.5 transition-colors sm:size-4"}),(0,t.jsx)("span",{children:"編輯"})]})},{value:"delete",label:(0,t.jsxs)("span",{className:"group text-text flex items-center gap-3 rounded px-2 py-1 transition-colors group-hover:text-red-500 group-active:text-red-500",children:[(0,t.jsx)(a.DeleteIcon,{className:"size-3.5 transition-colors sm:size-4"}),(0,t.jsx)("span",{children:"刪除"})]})}]})]})}])},5390,e=>{"use strict";var t=e.i(18566),r=e.i(71645);let a=e=>{let a=(0,t.useRouter)();(0,r.useEffect)(()=>{a.prefetch(e)},[a,e])};e.s(["PrefetchRoute",0,()=>(a("/edit"),a("/analysis"),a("/group"),null)],5390)},99277,e=>{e.v(t=>Promise.all(["static/chunks/437f8e1122e8f72b.js","static/chunks/2c1a5b2ec8695c65.js","static/chunks/d5e8391a59116082.js"].map(t=>e.l(t))).then(()=>t(77115)))},95264,e=>{e.v(t=>Promise.all(["static/chunks/f486fbe676110581.js","static/chunks/6c0d197c8543c2aa.js","static/chunks/8007746fd0e61649.js"].map(t=>e.l(t))).then(()=>t(82103)))}]);