(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,73886,e=>{"use strict";e.s(["normalizeNumber",0,e=>{let t=Math.floor(e).toString(),r=[],a=t.split("").reverse(),s=0;return a.forEach(e=>{0!==s&&s%3==0&&r.push(","),r.push(e),s++}),r.toReversed().join("")}])},40141,e=>{"use strict";var t=e.i(71645),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=t.default.createContext&&t.default.createContext(r),s=["attr","size","title"];function i(){return(i=Object.assign.bind()).apply(this,arguments)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function n(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){var a,s,i;a=e,s=t,i=r[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in a?Object.defineProperty(a,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[s]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e){return r=>t.default.createElement(d,i({attr:n({},e.attr)},r),function e(r){return r&&r.map((r,a)=>t.default.createElement(r.tag,n({key:a},r.attr),e(r.child)))}(e.child))}function d(e){var l=r=>{var a,{attr:l,size:o,title:d}=e,c=function(e,t){if(null==e)return{};var r,a,s=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}(e,s),u=o||r.size||"1em";return r.className&&(a=r.className),e.className&&(a=(a?a+" ":"")+e.className),t.default.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,l,c,{className:a,style:n(n({color:e.color||r.color},r.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),d&&t.default.createElement("title",null,d),e.children)};return void 0!==a?t.default.createElement(a.Consumer,null,e=>l(e)):l(r)}e.s(["GenIcon",()=>o],40141)},3995,e=>{"use strict";var t=e.i(43476);e.s(["CalendarIcon",0,e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-calendar-event",viewBox:"0 0 16 16",...e,children:[(0,t.jsx)("path",{d:"M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5z"}),(0,t.jsx)("path",{d:"M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5M1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4z"})]})])},10788,e=>{"use strict";var t=e.i(71645);e.s(["useScrollToTop",0,()=>{(0,t.useEffect)(()=>{window.scrollTo(0,0)},[])}])},15843,e=>{"use strict";var t=e.i(43476);e.s(["DeleteIcon",0,e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash",viewBox:"0 0 16 16",...e,children:[(0,t.jsx)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5m3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0z"}),(0,t.jsx)("path",{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4zM2.5 3h11V2h-11z"})]})])},76497,97246,e=>{"use strict";var t=e.i(43476);let r=e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-three-dots",viewBox:"0 0 16 16",...e,children:(0,t.jsx)("path",{d:"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"})});var a=e.i(47573),s=e.i(71645);e.s(["ActionMenu",0,e=>{let{options:i,onClick:l}=e,[n,o]=(0,s.useState)(!1),d=(0,a.default)(()=>{o(!1)});return(0,t.jsxs)("div",{ref:d,className:"relative",children:[(0,t.jsx)("button",{type:"button",onClick:()=>{o(e=>!e)},className:`rounded-full p-2 transition-colors ${n?"bg-gray-300":"hover:bg-gray-300 active:bg-gray-300"}`,children:(0,t.jsx)(r,{className:"size-4"})}),(0,t.jsx)("div",{className:`bg-background absolute top-full right-3 z-30 flex w-fit flex-col rounded-lg p-2 shadow transition-all ${n?"opacity-100":"hidden opacity-0"}`,children:i.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{l&&l(e.value)},className:`group flex items-center gap-2 rounded px-4 py-2 whitespace-nowrap transition-colors hover:bg-gray-100 active:bg-gray-100 ${e.className??""}`,children:e.label},e.value))})]})}],76497),e.s(["EditIcon",0,e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-pen",viewBox:"0 0 16 16",...e,children:(0,t.jsx)("path",{d:"m13.498.795.149-.149a1.207 1.207 0 1 1 1.707 1.708l-.149.148a1.5 1.5 0 0 1-.059 2.059L4.854 14.854a.5.5 0 0 1-.233.131l-4 1a.5.5 0 0 1-.606-.606l1-4a.5.5 0 0 1 .131-.232l9.642-9.642a.5.5 0 0 0-.642.056L6.854 4.854a.5.5 0 1 1-.708-.708L9.44.854A1.5 1.5 0 0 1 11.5.796a1.5 1.5 0 0 1 1.998-.001m-.644.766a.5.5 0 0 0-.707 0L1.95 11.756l-.764 3.057 3.057-.764L14.44 3.854a.5.5 0 0 0 0-.708z"})})],97246)},48702,e=>{"use strict";var t=e.i(43476),r=e.i(76497),a=e.i(15843),s=e.i(97246),i=e.i(61500),l=e.i(39287),n=e.i(6705),o=e.i(63229),d=e.i(68559),c=e.i(73886),u=e.i(22016),m=e.i(18566),g=e.i(71645);e.s(["SpendingItem",0,e=>{let{spending:x,refreshData:p}=e,{config:h}=(0,i.useUserConfigCtx)(),[f,v]=(0,g.useState)(!1),b=(0,m.useRouter)(),y=(0,g.useMemo)(()=>h?.email===x["user-token"],[h?.email,x]),j=(0,g.useMemo)(()=>(0,d.getSpendingCategoryMap)(x.type),[x.type]),w=(0,g.useMemo)(()=>j.find(e=>e.value===x.category),[j,x.category]),N=(0,g.useMemo)(()=>f?"shadow-[0_0_0_2px_hsl(20,80%,70%)]":"active:bg-gray-100 hover:bg-gray-100",[f]),S=(0,g.useCallback)(()=>{confirm("確定要刪除這筆資料嗎?")&&(v(!0),(0,l.deleteItem)(x.id).then(()=>{(0,g.startTransition)(()=>{v(!1),p()})}))},[p,x.id]),O=(0,g.useCallback)(e=>{"delete"===e?S():"edit"===e&&b.push(`/edit?id=${x.id}`)},[S,b,x.id]),M=(0,g.useMemo)(()=>{let e=new Date(x.date),t=e.getHours(),r=e.getMinutes().toString().padStart(2,"0");return{period:t>=12?"PM":"AM",time:`${t%12||12}:${r}`}},[x.date]);return(0,t.jsxs)("div",{className:`relative flex items-center gap-2 rounded-lg bg-gray-50 p-2 text-sm transition-all sm:text-base md:p-3 ${N}`,children:[f&&(0,t.jsx)("span",{className:"absolute top-0 left-1 -translate-y-1/2 rounded-full bg-red-300 px-2 py-0.5 text-xs font-bold text-white",children:"刪除中"}),w&&(0,t.jsx)("span",{title:n.CATEGORY_WORDING_MAP[w.value],className:"flex size-6 items-center justify-center rounded-md",children:(0,o.getCategoryIcon)(w.value,`size-5 ${x.necessity===n.Necessity.Need?"text-primary-500":"text-gray-500"}`)}),(0,t.jsxs)("div",{className:"flex flex-1 flex-col gap-0.5 overflow-hidden",children:[(0,t.jsx)("div",{title:x.description,className:"overflow-hidden text-ellipsis whitespace-nowrap font-medium",children:x.description}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)("span",{className:"rounded bg-gray-300 px-1.5 py-0.5 text-xs font-medium text-gray-600",children:M.period}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:M.time})]})]}),(0,t.jsxs)("div",{className:`w-fit text-end font-bold ${x.type===n.SpendingType.Outcome?"text-red-500":"text-green-500"}`,children:["$",(0,c.normalizeNumber)(Number(x.amount))]}),y&&(0,t.jsx)(r.ActionMenu,{onClick:O,options:[{value:"edit",label:(0,t.jsxs)(u.default,{href:`/edit?id=${x.id}`,className:"text-text group-hover:text-primary-500 group-active:text-primary-500 flex items-center gap-3 rounded px-2 py-1 transition-colors",children:[(0,t.jsx)(s.EditIcon,{className:"size-3.5 transition-colors sm:size-4"}),(0,t.jsx)("span",{children:"編輯"})]})},{value:"delete",label:(0,t.jsxs)("span",{className:"group text-text flex items-center gap-3 rounded px-2 py-1 transition-colors group-hover:text-red-500 group-active:text-red-500",children:[(0,t.jsx)(a.DeleteIcon,{className:"size-3.5 transition-colors sm:size-4"}),(0,t.jsx)("span",{children:"刪除"})]})}]})]})}])},5390,e=>{"use strict";var t=e.i(18566),r=e.i(71645);let a=e=>{let a=(0,t.useRouter)();(0,r.useEffect)(()=>{a.prefetch(e)},[a,e])};e.s(["PrefetchRoute",0,()=>(a("/edit"),a("/analysis"),a("/group"),null)],5390)},58345,e=>{"use strict";var t=e.i(43476),r=e.i(48702);let a=e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16",...e,children:(0,t.jsx)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"})});var s=e.i(71645);let i=e=>{let{refreshData:i,data:l,filterStr:n,loading:o}=e,d=(0,s.useMemo)(()=>l.filter(e=>""===n||e.description.includes(n)),[l,n]),c=(0,s.useMemo)(()=>{let e={};return d.forEach(t=>{let r=((e,t="MM/dd")=>{let r=new Date(e),a=r.getFullYear(),s=(r.getMonth()+1).toString().padStart(2,"0"),i=r.getDate().toString().padStart(2,"0");return"MM/dd"===t?`${s}/${i}`:"yyyy/MM/dd/"===t?`${a}/${s}/${i}`:r.toLocaleDateString()})(t.date);e[r]||(e[r]=[]),e[r].push(t)}),e},[d]);return o?(0,t.jsx)("div",{className:"flex w-full flex-col gap-2 text-xs sm:text-sm",children:[1,2,3].map(e=>(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("div",{className:"mb-1 h-4 w-24 animate-pulse rounded-md bg-gray-200"}),(0,t.jsx)("div",{className:"h-12 w-full animate-pulse rounded-lg bg-gray-100 sm:h-14"}),(0,t.jsx)("div",{className:"mt-1 h-12 w-full animate-pulse rounded-lg bg-gray-100 sm:h-14"})]},e))}):0===d.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[(0,t.jsx)(a,{className:"mb-3 size-10 text-gray-300"}),(0,t.jsx)("p",{className:"mb-1 font-medium text-gray-600",children:"找不到符合的帳目"}),(0,t.jsx)("p",{className:"text-sm text-gray-400",children:"請嘗試其他搜尋條件或新增帳目"})]}):(0,t.jsx)("div",{className:"flex w-full flex-col gap-2 text-xs sm:text-sm",children:Object.keys(c).map((e,a)=>(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-gray-500",children:e}),(0,t.jsx)("div",{className:"flex flex-col gap-1 rounded border-2 border-solid border-transparent p-1 transition-all",id:`spending-list-${e}`,children:c[e].map((e,a)=>(0,t.jsx)(r.SpendingItem,{spending:e,refreshData:i},`${e.id}-${a.toString()}`))})]},e))})};var l=e.i(86780);let n=()=>(0,t.jsxs)("div",{className:"content-wrapper animate-pulse",children:[(0,t.jsx)("div",{className:"flex self-center rounded-lg border border-gray-200 bg-gray-100 p-2 shadow-sm h-10 w-64"}),(0,t.jsx)("div",{className:"flex w-full flex-col items-center gap-5 md:flex-row md:items-start",children:(0,t.jsxs)("div",{className:"bg-background flex w-full flex-col rounded-2xl border border-solid border-gray-200 p-5 shadow-sm",children:[(0,t.jsxs)("div",{className:"mb-5 flex items-center gap-4",children:[(0,t.jsx)("div",{className:"h-6 w-16 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"ml-auto h-9 w-40 bg-gray-100 rounded-lg border border-gray-200"})]}),(0,t.jsx)("div",{className:"flex flex-col gap-3",children:[1,2,3,4,5,6,7,8].map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"mb-2 h-5 w-24 bg-gray-200 rounded"}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:[1,2,3].map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-lg bg-gray-50 p-3",children:[(0,t.jsx)("div",{className:"size-6 bg-gray-200 rounded"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"h-4 w-32 bg-gray-200 rounded mb-1"}),(0,t.jsx)("div",{className:"h-3 w-20 bg-gray-200 rounded"})]}),(0,t.jsx)("div",{className:"h-5 w-16 bg-gray-200 rounded"})]},e))})]},e))})]})})]});var o=e.i(76877),d=e.i(26383),c=e.i(10788),u=e.i(96133),m=e.i(75329);e.s(["SpendingInfoSection",0,({isMobile:e})=>{(0,c.useScrollToTop)();let{syncData:r,data:g,loading:x}=(0,d.useGetSpendingCtx)(),{currentGroup:p}=(0,o.useGroupCtx)(),[h,f]=(0,s.useState)(!0),[v,b]=(0,s.useState)(!0),[y,j]=(0,s.useState)([]),[w,N]=(0,s.useState)(""),S=(0,s.useRef)(null),O=(0,u.useYearMonth)(new Date),M=(0,s.useCallback)(()=>{let{startDate:e,endDate:t}=(0,m.getStartEndOfMonth)(new Date(Number(O.year),Number(O.month)-1));r(p?.account_id?String(p.account_id):void 0,void 0,e.toISOString(),t.toISOString())},[r,O.year,O.month,p?.account_id]),C=(0,s.useCallback)((e,t,a)=>{let{startDate:s,endDate:i}=(0,m.getStartEndOfMonth)(new Date(Number(t),Number(a)-1));r(e||void 0,void 0,s.toISOString(),i.toISOString())},[r]);return((0,s.useEffect)(()=>{x||(0,s.startTransition)(()=>{j([...g]),b(!1),h&&g.length>0&&f(!1)})},[g,x,h]),(0,s.useEffect)(()=>{let e=S.current,t=()=>{N(e?.value||"")};return e?.addEventListener("change",t),()=>e?.removeEventListener("change",t)},[]),(0,s.useEffect)(()=>{let{startDate:e,endDate:t}=(0,m.getStartEndOfMonth)(new Date(Number(O.year),Number(O.month)-1));r(p?.account_id?String(p.account_id):void 0,void 0,e.toISOString(),t.toISOString())},[p?.account_id,O.month,O.year,r]),h&&x)?(0,t.jsx)(n,{}):(0,t.jsxs)("div",{className:"content-wrapper",children:[(0,t.jsx)(l.YearMonthFilter,{refreshData:C,group:p,dateOptions:O,className:"flex self-center rounded-lg border border-gray-200 bg-white p-2 text-base shadow-sm"}),(0,t.jsx)("div",{className:"flex w-full flex-col items-center gap-5 md:flex-row md:items-start",children:(0,t.jsxs)("div",{className:"bg-background flex w-full flex-col rounded-2xl border border-solid border-gray-200 p-5 shadow-sm transition-shadow duration-200 hover:shadow",children:[(0,t.jsxs)("div",{className:"mb-5 flex items-center gap-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold",children:"帳目"}),(0,t.jsxs)("div",{className:"group hover:border-primary-400 focus-within:border-primary-500 relative ml-auto flex items-center gap-2 rounded-lg border border-solid border-gray-300 px-3 py-1.5 transition-all focus-within:shadow-sm",children:[(0,t.jsx)(a,{className:"group-hover:text-primary-500 group-focus-within:text-primary-500 text-gray-500 transition-colors"}),(0,t.jsx)("input",{ref:S,type:"text",placeholder:"搜尋帳目...",className:"w-32 bg-transparent py-0.5 text-sm font-medium focus:outline-0"})]})]}),(0,t.jsx)(i,{data:y,filterStr:w,loading:v,refreshData:M})]})})]})}],58345)}]);