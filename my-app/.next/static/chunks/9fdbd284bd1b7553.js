(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,33525,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},60425,e=>{"use strict";var t=e.i(43476);function r({user:e}){let r=e?.name?e.name.charAt(0).toUpperCase():"U";return e?.avatar_url?(0,t.jsx)("div",{className:"flex size-full items-center justify-center overflow-hidden rounded-full",children:(0,t.jsx)("img",{src:e.avatar_url,alt:e.name||"User avatar",className:"size-full object-cover"})}):(0,t.jsx)("div",{className:"bg-primary-100 flex size-full items-center justify-center rounded-full",children:(0,t.jsx)("span",{className:"text-primary-500 text-2xl font-bold",children:r})})}e.s(["UserAvatar",()=>r])},18581,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return a}});let n=e.r(71645);function a(e,t){let r=(0,n.useRef)(null),a=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=s(e,n)),t&&(a.current=s(t,n))},[e,t])}function s(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},98183,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={assign:function(){return o},searchParamsToUrlQuery:function(){return s},urlQueryToSearchParams:function(){return l}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});function s(e){let t={};for(let[r,n]of e.entries()){let e=t[r];void 0===e?t[r]=n:Array.isArray(e)?e.push(n):t[r]=[e,n]}return t}function i(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function l(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,i(e));else t.set(r,i(n));return t}function o(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,n]of r.entries())e.append(t,n)}return e}},95057,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={formatUrl:function(){return l},formatWithValidation:function(){return c},urlObjectKeys:function(){return o}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let s=e.r(90809)._(e.r(98183)),i=/https?|ftp|gopher|file/;function l(e){let{auth:t,hostname:r}=e,n=e.protocol||"",a=e.pathname||"",l=e.hash||"",o=e.query||"",c=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?c=t+e.host:r&&(c=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(c+=":"+e.port)),o&&"object"==typeof o&&(o=String(s.urlQueryToSearchParams(o)));let u=e.search||o&&`?${o}`||"";return n&&!n.endsWith(":")&&(n+=":"),e.slashes||(!n||i.test(n))&&!1!==c?(c="//"+(c||""),a&&"/"!==a[0]&&(a="/"+a)):c||(c=""),l&&"#"!==l[0]&&(l="#"+l),u&&"?"!==u[0]&&(u="?"+u),a=a.replace(/[?#]/g,encodeURIComponent),u=u.replace("#","%23"),`${n}${c}${a}${u}${l}`}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function c(e){return l(e)}},18967,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DecodeError:function(){return x},MiddlewareNotFoundError:function(){return y},MissingStaticPage:function(){return j},NormalizeError:function(){return v},PageNotFoundError:function(){return b},SP:function(){return m},ST:function(){return g},WEB_VITALS:function(){return s},execOnce:function(){return i},getDisplayName:function(){return f},getLocationOrigin:function(){return c},getURL:function(){return u},isAbsoluteUrl:function(){return o},isResSent:function(){return d},loadGetInitialProps:function(){return p},normalizeRepeatedSlashes:function(){return h},stringifyError:function(){return w}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let s=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let l=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,o=e=>l.test(e);function c(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function u(){let{href:e}=window.location,t=c();return e.substring(t.length)}function f(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function d(e){return e.finished||e.headersSent}function h(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function p(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await p(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&d(r))return n;if(!n)throw Object.defineProperty(Error(`"${f(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let m="undefined"!=typeof performance,g=m&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class x extends Error{}class v extends Error{}class b extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class j extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class y extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function w(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return s}});let n=e.r(18967),a=e.r(52817);function s(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,a.hasBasePath)(r.pathname)}catch(e){return!1}}},84508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},22016,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={default:function(){return x},useLinkStatus:function(){return b}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let s=e.r(90809),i=e.r(43476),l=s._(e.r(71645)),o=e.r(95057),c=e.r(8372),u=e.r(18581),f=e.r(18967),d=e.r(5550);e.r(33525);let h=e.r(91949),p=e.r(73668),m=e.r(65793);function g(e){return"string"==typeof e?e:(0,o.formatUrl)(e)}function x(t){var r;let n,a,s,[o,x]=(0,l.useOptimistic)(h.IDLE_LINK_STATUS),b=(0,l.useRef)(null),{href:j,as:y,children:w,prefetch:N=null,passHref:_,replace:C,shallow:P,scroll:z,onClick:O,onMouseEnter:E,onTouchStart:M,legacyBehavior:S=!1,onNavigate:k,ref:I,unstable_dynamicOnHover:T,...A}=t;n=w,S&&("string"==typeof n||"number"==typeof n)&&(n=(0,i.jsx)("a",{children:n}));let U=l.default.useContext(c.AppRouterContext),L=!1!==N,R=!1!==N?null===(r=N)||"auto"===r?m.FetchStrategy.PPR:m.FetchStrategy.Full:m.FetchStrategy.PPR,{href:B,as:$}=l.default.useMemo(()=>{let e=g(j);return{href:e,as:y?g(y):e}},[j,y]);if(S){if(n?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});a=l.default.Children.only(n)}let D=S?a&&"object"==typeof a&&a.ref:I,F=l.default.useCallback(e=>(null!==U&&(b.current=(0,h.mountLinkInstance)(e,B,U,R,L,x)),()=>{b.current&&((0,h.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,h.unmountPrefetchableInstance)(e)}),[L,B,U,R,x]),H={ref:(0,u.useMergedRef)(F,D),onClick(t){S||"function"!=typeof O||O(t),S&&a.props&&"function"==typeof a.props.onClick&&a.props.onClick(t),!U||t.defaultPrevented||function(t,r,n,a,s,i,o){if("undefined"!=typeof window){let c,{nodeName:u}=t.currentTarget;if("A"===u.toUpperCase()&&((c=t.currentTarget.getAttribute("target"))&&"_self"!==c||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,p.isLocalURL)(r)){s&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),o){let e=!1;if(o({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:f}=e.r(99781);l.default.startTransition(()=>{f(n||r,s?"replace":"push",i??!0,a.current)})}}(t,B,$,b,C,z,k)},onMouseEnter(e){S||"function"!=typeof E||E(e),S&&a.props&&"function"==typeof a.props.onMouseEnter&&a.props.onMouseEnter(e),U&&L&&(0,h.onNavigationIntent)(e.currentTarget,!0===T)},onTouchStart:function(e){S||"function"!=typeof M||M(e),S&&a.props&&"function"==typeof a.props.onTouchStart&&a.props.onTouchStart(e),U&&L&&(0,h.onNavigationIntent)(e.currentTarget,!0===T)}};return(0,f.isAbsoluteUrl)($)?H.href=$:S&&!_&&("a"!==a.type||"href"in a.props)||(H.href=(0,d.addBasePath)($)),s=S?l.default.cloneElement(a,H):(0,i.jsx)("a",{...A,...H,children:n}),(0,i.jsx)(v.Provider,{value:o,children:s})}e.r(84508);let v=(0,l.createContext)(h.IDLE_LINK_STATUS),b=()=>(0,l.useContext)(v);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},83439,30059,1350,86864,e=>{"use strict";var t=e.i(43476);e.s(["BarChartIcon",0,e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-bar-chart",viewBox:"0 0 16 16",...e,children:(0,t.jsx)("path",{d:"M4 11H2v3h2zm5-4H7v7h2zm5-5v12h-2V2zm-2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM6 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1zm-5 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1z"})})],83439),e.s(["BookIcon",0,e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-book",viewBox:"0 0 16 16",...e,children:(0,t.jsx)("path",{d:"M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783"})})],30059),e.s(["CoinIcon",0,e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-coin",viewBox:"0 0 16 16",...e,children:[(0,t.jsx)("path",{d:"M5.5 9.511c.076.954.83 1.697 2.182 1.785V12h.6v-.709c1.4-.098 2.218-.846 2.218-1.932 0-.987-.626-1.496-1.745-1.76l-.473-.112V5.57c.6.068.982.396 1.074.85h1.052c-.076-.919-.864-1.638-2.126-1.716V4h-.6v.719c-1.195.117-2.01.836-2.01 1.853 0 .9.606 1.472 1.613 1.707l.397.098v2.034c-.615-.093-1.022-.43-1.114-.9zm2.177-2.166c-.59-.137-.91-.416-.91-.836 0-.47.345-.822.915-.925v1.76h-.005zm.692 1.193c.717.166 1.048.435 1.048.91 0 .542-.412.914-1.135.982V8.518z"}),(0,t.jsx)("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),(0,t.jsx)("path",{d:"M8 13.5a5.5 5.5 0 1 1 0-11 5.5 5.5 0 0 1 0 11m0 .5A6 6 0 1 0 8 2a6 6 0 0 0 0 12"})]})],1350),e.s(["ListTaskIcon",0,e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-list-task",viewBox:"0 0 16 16",...e,children:[(0,t.jsx)("path",{fillRule:"evenodd",d:"M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5zM3 3H2v1h1z"}),(0,t.jsx)("path",{d:"M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1z"}),(0,t.jsx)("path",{fillRule:"evenodd",d:"M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5zM2 7h1v1H2zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm1 .5H2v1h1z"})]})],86864)},12252,e=>{"use strict";var t=e.i(43476);e.s(["HomeIcon",0,e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-house",viewBox:"0 0 16 16",...e,children:(0,t.jsx)("path",{d:"M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L2 8.207V13.5A1.5 1.5 0 0 0 3.5 15h9a1.5 1.5 0 0 0 1.5-1.5V8.207l.646.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293zM13 7.207V13.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5V7.207l5-5z"})})])},37549,e=>{"use strict";var t=e.i(43476),r=e.i(83439),n=e.i(30059),a=e.i(1350),s=e.i(12252),i=e.i(86864),l=e.i(6705),o=e.i(22016),c=e.i(18566);let u={"/":(0,t.jsx)(s.HomeIcon,{className:"size-4"}),"/transactions":(0,t.jsx)(i.ListTaskIcon,{className:"size-4"}),"/group":(0,t.jsx)(n.BookIcon,{className:"size-4"}),"/analysis":(0,t.jsx)(r.BarChartIcon,{className:"size-4"}),"/budget":(0,t.jsx)(a.CoinIcon,{className:"size-4"})};e.s(["BottomNav",0,()=>{let e=(0,c.usePathname)();return(0,t.jsx)("nav",{className:"fixed right-4 bottom-5 left-4 z-40 rounded-full bg-white/50 shadow-[0_-2px_16px_rgba(0,0,0,0.1)] backdrop-blur-md md:hidden","aria-label":"Mobile navigation",children:(0,t.jsx)("div",{className:"safe-area-inset-bottom flex items-center justify-around px-2 py-2",children:Object.keys(l.MENU_CONFIG).map(r=>{let n=e===r;return(0,t.jsxs)(o.default,{href:r,className:`flex size-12 flex-col items-center justify-center gap-1 rounded-full transition-colors duration-200 hover:bg-white/50 ${n?"text-primary-500":"active:text-primary-400 text-gray-500 hover:text-gray-700"}`,"aria-label":l.MENU_CONFIG[r],"aria-current":n?"page":void 0,children:[(0,t.jsx)("span",{className:"flex items-center justify-center",children:u[r]}),(0,t.jsx)("span",{className:"text-xs font-medium",children:l.MENU_CONFIG[r]})]},r)})})})}])},96480,e=>{"use strict";var t=e.i(43476),r=e.i(83439),n=e.i(30059),a=e.i(1350),s=e.i(12252),i=e.i(86864);let l=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-gear",viewBox:"0 0 16 16",...e,children:[(0,t.jsx)("path",{d:"M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"}),(0,t.jsx)("path",{d:"M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"})]});var o=e.i(60425),c=e.i(61500),u=e.i(47573),f=e.i(6705),d=e.i(22016),h=e.i(18566),p=e.i(71645);let m=e=>{let{isOpen:r,onClose:n}=e,{config:a}=(0,c.useUserConfigCtx)(),s=(0,p.useRef)(null),i=(0,u.default)(()=>{n(),h()}),h=(0,p.useCallback)(()=>{(0,p.startTransition)(()=>{s.current&&i.current&&(s.current.style.right="100%",i.current.style.left="-300px")})},[i]),m=(0,p.useCallback)(()=>{(0,p.startTransition)(()=>{s.current&&i.current&&(s.current.style.right="0",i.current.style.left="0")})},[i]);return(0,p.useEffect)(()=>{r?m():h()},[h,r,m]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{ref:s,className:"fixed top-0 right-full bottom-0 left-0 z-50 bg-black/50 max-md:hidden"}),(0,t.jsxs)("aside",{ref:i,className:"bg-background fixed top-0 bottom-0 -left-72 z-50 flex max-md:hidden w-72 origin-right flex-col items-center justify-between shadow-[1px_0_16px_0px_black] transition-all",children:[(0,t.jsx)("div",{className:"gradient-r-from-purple-to-blue clip-profile-bg absolute h-30 w-full"}),(0,t.jsx)("div",{className:"relative flex w-full flex-col items-center pt-17",children:(0,t.jsx)(d.default,{href:"/profile",onClick:n,className:"bg-background flex size-20 items-center justify-center rounded-full p-1 transition-all hover:scale-105 active:scale-95",children:(0,t.jsx)(o.UserAvatar,{user:a})})}),(0,t.jsxs)("div",{className:"mt-4 flex w-full flex-col items-center px-4",children:[(0,t.jsx)("h3",{className:"max-w-70 overflow-hidden text-base font-bold text-ellipsis whitespace-nowrap",children:a?a.name:"尚未登入"}),(0,t.jsx)("p",{className:"max-w-70 overflow-hidden text-xs text-ellipsis whitespace-nowrap text-gray-500",children:a?a.email:"尚未登入"})]}),(0,t.jsx)("div",{className:"flex h-px w-full items-center px-4 py-5",children:(0,t.jsx)("span",{className:"h-px w-full bg-gray-200"})}),(0,t.jsx)("div",{className:"flex w-full flex-1 flex-col items-center gap-2 px-4",children:Object.keys(f.MENU_CONFIG).map(e=>(0,t.jsx)(x,{href:e,label:f.MENU_CONFIG[e],onClick:n},e))}),(0,t.jsx)("div",{className:"w-full border-t border-solid border-gray-300 px-4 py-2",children:(0,t.jsx)(x,{href:"/setting",onClick:n,label:"設定",icon:(0,t.jsx)(l,{className:"mr-3 size-4 sm:mr-4"})})})]}),(0,t.jsx)("svg",{width:"0",height:"0",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("defs",{children:(0,t.jsx)("clipPath",{id:"clip-profile-bg",clipPathUnits:"userSpaceOnUse",children:(0,t.jsx)("path",{d:"M 0,0 L 288,0 L 288,120 L 194,120 A 10,10 0,0,1 184,110 A 40,40 0,0,0 104,110 A 10,10 0,0,1 94,120 L 0,120 L 0,0 Z"})})})})]})},g={"/":(0,t.jsx)(s.HomeIcon,{className:"mr-3 size-4 sm:mr-4"}),"/transactions":(0,t.jsx)(i.ListTaskIcon,{className:"mr-3 size-4 sm:mr-4"}),"/analysis":(0,t.jsx)(r.BarChartIcon,{className:"mr-3 size-4 sm:mr-4"}),"/budget":(0,t.jsx)(a.CoinIcon,{className:"mr-3 size-4 sm:mr-4"}),"/group":(0,t.jsx)(n.BookIcon,{className:"mr-3 size-4 sm:mr-4"})},x=({href:e,icon:r,label:n,onClick:a})=>{let s=(0,h.usePathname)();return e?(0,t.jsxs)(d.default,{href:e,onClick:a,className:`flex w-full items-center rounded-md px-5 py-3 text-left text-sm font-semibold transition-all sm:text-base ${s===e?"bg-primary-100":"active:bg-primary-100 hover:bg-primary-100"}`,children:[r??g[e],n]}):(0,t.jsxs)("button",{onClick:a,className:"active:bg-primary-100 hover:bg-primary-100 flex w-full items-center rounded-md px-5 py-3 text-left text-sm font-semibold transition-all sm:text-base",children:[r,n]})};var v=e.i(77136),b=e.i(76877),j=e.i(71208);let y=({className:e=""})=>{let{loading:r,groups:n,currentGroup:a,setCurrentGroup:s}=(0,b.useGroupCtx)(),i=(0,p.useCallback)(e=>{let t=n.find(t=>String(t.account_id)===e);t&&((0,j.setCookie)("currentGroupId",String(t.account_id),{expires:new Date(Date.now()+6048e5)}),s(t))},[n,s]);return(0,t.jsx)(v.Select,{name:"group",value:a?.name??"載入帳本資訊中...",onChange:i,className:`max-w-50 rounded-full border border-solid border-gray-300 px-3 py-1 transition-colors active:border-gray-500 sm:hover:border-gray-500 ${e}`,children:!r&&n.map(e=>e.account_id&&(0,t.jsx)(v.Select.Item,{value:e.account_id.toString(),className:"text-sm",children:e.name},e.account_id))})},w=e=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-list",viewBox:"0 0 16 16",...e,children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"})}),N=e=>{let{openAside:r}=e;return(0,t.jsx)("button",{onClick:r,className:"size-8 max-md:hidden rounded-full p-1 transition-colors hover:bg-primary-100 active:bg-primary-100",children:(0,t.jsx)(w,{className:"size-full"})})},_=({openAside:e})=>{let{config:r}=(0,c.useUserConfigCtx)();return(0,t.jsx)("div",{className:"sticky top-0 left-0 z-40 w-full bg-white/50 p-4 shadow backdrop-blur",children:(0,t.jsxs)("div",{className:"relative flex items-center gap-3",children:[(0,t.jsx)(N,{openAside:e}),(0,t.jsxs)(d.default,{href:"/profile",className:"flex items-center gap-2 md:hidden",children:[(0,t.jsx)("div",{className:"size-8 shrink-0",children:(0,t.jsx)(o.UserAvatar,{user:r})}),(0,t.jsxs)("span",{className:"text-sm font-semibold whitespace-nowrap",children:["哈摟，",r?.name||"訪客","！"]})]}),(0,t.jsx)("div",{className:"ml-auto",children:(0,t.jsx)(y,{className:"max-w-80 font-bold"})})]})})};e.s(["Header",0,()=>{let[e,r]=(0,p.useState)(!1);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(_,{openAside:()=>r(!0)}),(0,t.jsx)(m,{isOpen:e,onClose:()=>r(!1)})]})}],96480)},23372,e=>{"use strict";var t=e.i(43476),r=e.i(76877),n=e.i(26383),a=e.i(61500),s=e.i(39997),i=e.i(75329),l=e.i(71208),o=e.i(71645);e.s(["PrepareData",0,()=>((()=>{let{syncGroup:e,groups:t,setCurrentGroup:c,currentGroup:u,loading:f}=(0,r.useGroupCtx)(),{config:d,syncUser:h}=(0,a.useUserConfigCtx)(),{syncData:p}=(0,n.useGetSpendingCtx)();(0,o.useEffect)(()=>{console.log("Syncing groups for user",d?.user_id),d?.user_id&&e(d.user_id)},[d?.user_id,e]),(0,o.useEffect)(()=>{if(console.log("Checking to set default current group",{groups:t,currentGroup:u}),t.length>0&&!u){let e=(0,l.getCookie)("currentGroupId")||"",r=t.find(t=>String(t.account_id)===e)??t.sort((e,t)=>(e.created_at?new Date(e.created_at).getTime():0)-(t.created_at?new Date(t.created_at).getTime():0))[0];console.log("Setting default current group",r),c(r)}},[t,c,u]),(0,o.useEffect)(()=>{if(!f&&0===t.length&&d?.user_id){console.log("[usePrepareData] Creating default group for user:",d.user_id);let t={account_id:Date.now(),name:`${d.name} 的個人帳本`,owner_id:d.user_id};(0,s.createGroup)(t).then(t=>{t.status?(console.log("[usePrepareData] ✅ Default group created successfully"),e(d.user_id)):console.error("[usePrepareData] ❌ Failed to create default group:",t.message)})}},[f,t.length,d?.user_id,e,d?.name]),(0,o.useEffect)(()=>{if(console.log("Preparing data for",{email:d?.email,group:u?.account_id}),u?.account_id){let{startDate:e,endDate:t}=(0,i.getStartEndOfMonth)(new Date);p(String(u.account_id),void 0,e.toISOString(),t.toISOString())}},[d?.email,p,u?.account_id]),(0,o.useEffect)(()=>{h()},[h])})(),(0,t.jsx)(t.Fragment,{}))],23372)}]);