(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,22520,e=>{"use strict";var t=e.i(43476),s=e.i(6705),a=e.i(70703);let r=(0,a.default)(()=>e.A(99277),{loadableGenerated:{modules:[77115]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"h-64 w-full animate-pulse rounded-lg bg-gray-100"})}),l=e=>{let{costList:a,dateStr:l,isMobile:i}=e,n=new Date(l),d=n.getFullYear(),o=n.getMonth(),c=new Date(d,o+1,0).getDate(),m=Array(c).fill(0),x=0;return a.forEach(e=>{if(e.type===s.SpendingType.Outcome){let t=new Date(e.date).getDate()-1;m[t]+=Number(e.amount),x=Math.max(x,Math.abs(m[t]))}}),(0,t.jsxs)("div",{className:"bg-background relative flex w-full flex-col items-start rounded-2xl border border-solid border-gray-300 p-6 text-gray-700 shadow-sm transition-shadow duration-200 hover:shadow md:min-w-110",children:[(0,t.jsx)("h3",{className:"mb-2 text-lg font-semibold",children:"本月消費趨勢"}),(0,t.jsx)("div",{className:"flex w-full items-end py-4 text-xs sm:text-sm",children:(0,t.jsx)(r,{month:o,data:m,init:Array(c).fill(0),isMobile:i,handleOnClick:()=>{}})})]})};var i=e.i(22016),n=e.i(40141);function d(e){return(0,n.GenIcon)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M416 277.333H277.333V416h-42.666V277.333H96v-42.666h138.667V96h42.666v138.667H416v42.666z"},child:[]}]})(e)}let o=({children:e,className:s=""})=>(0,t.jsx)("div",{className:`bg-background w-fit rounded-lg ${s}`,children:(0,t.jsxs)(i.default,{href:"/edit",className:"gradient-r-from-purple-to-blue flex items-center justify-center gap-2 rounded-lg px-4 py-2 sm:px-6 sm:py-3 shadow-sm hover:shadow-md transition-all duration-200",scroll:!1,children:[(0,t.jsx)(d,{className:"size-5"}),(0,t.jsx)("span",{children:e})]})});var c=e.i(44970),m=e.i(73886),x=e.i(73665);let h=(0,a.default)(()=>e.A(95264),{loadableGenerated:{modules:[82103]},ssr:!1});function u(e){let{monthlyBudget:s=0,costList:a,isMobile:r}=e,{totalIncome:l,totalOutcome:i}=(0,c.getExpenseFromData)(a),n=s-i;return(0,t.jsxs)("div",{className:"bg-background relative flex w-full items-center justify-between gap-4 rounded-2xl border border-solid border-gray-300 p-6 text-gray-700 shadow-sm transition-shadow duration-200 hover:shadow md:min-w-110",children:[(0,t.jsxs)("div",{className:"flex h-full min-h-35 flex-col md:min-h-50",children:[(0,t.jsxs)("div",{className:"mb-2",children:[(0,t.jsxs)("h3",{className:"mb-1 text-sm font-medium text-gray-500",children:["結餘 $",(0,m.normalizeNumber)(l-i)]}),(0,t.jsxs)("span",{className:"flex items-center gap-2",children:[(0,t.jsx)(x.MdOutlineWallet,{className:"text-primary-400 size-6"}),(0,t.jsx)("span",{className:"text-primary-500 text-xl leading-12 font-bold sm:text-3xl",children:`$${(0,m.normalizeNumber)(s-i)}`})]})]}),(0,t.jsxs)("div",{className:"mb-4 flex flex-col gap-1",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"flex items-center gap-1 text-gray-500",children:(0,t.jsx)("span",{children:"預算"})}),(0,t.jsx)("span",{className:"font-medium text-green-600",children:s?`$${(0,m.normalizeNumber)(s)}`:"$0"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsx)("span",{className:"flex items-center gap-1 text-gray-500",children:(0,t.jsx)("span",{children:"支出"})}),(0,t.jsx)("span",{className:"font-medium text-red-600",children:i?`$${(0,m.normalizeNumber)(i)}`:"$0"})]}),(0,t.jsxs)("div",{className:"mt-1 flex items-center justify-between border-t border-gray-100 pt-1 text-sm",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"剩餘預算"}),(0,t.jsx)("span",{className:`font-medium ${n>=0?"text-green-600":"text-red-600"}`,children:`$${(0,m.normalizeNumber)(n)}`})]})]}),(0,t.jsx)(o,{className:"mt-auto text-sm whitespace-nowrap sm:text-base",children:"立即新增帳目"})]}),(0,t.jsx)(h,{totalIncome:s,totalOutcome:i,isMobile:r})]})}var g=e.i(83439),f=e.i(30059),p=e.i(1350);let b=[{title:"帳目編輯",description:"詳細收支記錄",href:"/transactions",icon:e.i(86864).ListTaskIcon,gradient:"from-purple-400 to-pink-300"},{title:"帳本管理",description:"管理帳本與成員",href:"/group",icon:f.BookIcon,gradient:"from-primary-400 to-primary-600"},{title:"帳目分析",description:"查看消費統計圖表",href:"/analysis",icon:g.BarChartIcon,gradient:"from-blue-400 to-indigo-500"},{title:"預算管理",description:"設定與管理預算",href:"/budget",icon:p.CoinIcon,gradient:"from-green-400 to-emerald-500"}],j=({isMobile:e})=>(0,t.jsx)("div",{className:"grid w-full grid-cols-2 gap-3 md:min-w-110",children:b.map(e=>{let s=e.icon;return(0,t.jsxs)(i.default,{href:e.href,className:"bg-background group relative flex flex-col items-center justify-center gap-2 rounded-2xl border border-gray-200 p-4 shadow-sm transition-all duration-200 hover:scale-105 hover:shadow active:scale-100",children:[(0,t.jsx)("div",{className:`flex items-center justify-center rounded-full bg-gradient-to-r ${e.gradient} p-3`,children:(0,t.jsx)(s,{className:"size-6 text-white"})}),(0,t.jsx)("h3",{className:"text-sm font-bold text-gray-700",children:e.title}),(0,t.jsx)("p",{className:"text-center text-xs text-gray-500",children:e.description})]},e.href)})});var w=e.i(48702);let v=e=>(0,t.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-chevron-double-right",viewBox:"0 0 16 16",...e,children:[(0,t.jsx)("path",{fillRule:"evenodd",d:"M3.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L9.293 8 3.646 2.354a.5.5 0 0 1 0-.708"}),(0,t.jsx)("path",{fillRule:"evenodd",d:"M7.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L13.293 8 7.646 2.354a.5.5 0 0 1 0-.708"})]});var N=e.i(71645);let y=({data:e,loading:s,refreshData:a})=>{let r=(0,N.useMemo)(()=>[...e].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).slice(0,5),[e]);return s&&0===e.length?(0,t.jsxs)("div",{className:"bg-background flex w-full flex-col rounded-2xl border border-gray-200 p-5 shadow-sm md:min-w-110",children:[(0,t.jsx)("h3",{className:"mb-4 text-lg font-bold",children:"最近 5 筆交易"}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:[1,2,3].map(e=>(0,t.jsx)("div",{className:"h-14 w-full animate-pulse rounded-lg bg-gray-100"},e))})]}):(0,t.jsxs)("div",{className:"bg-background flex w-full flex-col rounded-2xl border border-gray-200 p-5 shadow-sm md:min-w-110",children:[(0,t.jsxs)("div",{className:"mb-4 flex items-center justify-between",children:[(0,t.jsx)("h3",{className:"text-lg font-bold",children:"最近 5 筆交易"}),(0,t.jsxs)(i.default,{href:"/transactions",className:"text-primary-500 hover:text-primary-400 active:text-primary-600 flex items-center gap-1 text-xs font-bold transition-colors",children:["查看更多",(0,t.jsx)(v,{className:"size-3"})]})]}),(0,t.jsx)("div",{className:"flex flex-col gap-2",children:0===r.length?(0,t.jsx)("p",{className:"py-8 text-center text-sm text-gray-400",children:"尚無交易記錄"}):r.map((e,s)=>(0,t.jsx)(w.SpendingItem,{spending:e,refreshData:a||(()=>{})},`${e.id}-${s}`))})]})};var S=e.i(76877),M=e.i(26383),D=e.i(1550),$=e.i(75329),O=e.i(86780),k=e.i(96133);e.s(["DashboardSection",0,({isMobile:e})=>{let{syncData:s,data:a,loading:r}=(0,M.useGetSpendingCtx)(),{currentGroup:i}=(0,S.useGroupCtx)(),[n,d]=(0,N.useState)([]),[o,c]=(0,N.useState)(null),m=(0,k.useYearMonth)(new Date),x=(0,N.useCallback)(()=>{let e=new Date,{startDate:t,endDate:a}=(0,$.getStartEndOfMonth)(e);s(i?.account_id?String(i.account_id):void 0,void 0,t.toISOString(),a.toISOString())},[i?.account_id,s]),h=(0,N.useCallback)((e,t,a)=>{let{startDate:r,endDate:l}=(0,$.getStartEndOfMonth)(new Date(Number(t),Number(a)-1));s(e||void 0,void 0,r.toISOString(),l.toISOString())},[s]);(0,N.useEffect)(()=>{i?.account_id&&(0,D.getBudget)(i.account_id).then(e=>{e.status&&e.data&&c(e.data)}).catch(console.error)},[i?.account_id]),(0,N.useEffect)(()=>{x()},[x]),(0,N.useEffect)(()=>{(0,N.startTransition)(()=>{d([...a])})},[a]);let g=(0,N.useMemo)(()=>{if(!o?.monthly_items)return 0;let e=new Date().getMonth()+1,t=0;return o.monthly_items.forEach(s=>{let a=s.months?.[e.toString()];a&&(t+=a)}),t},[o]);return(0,t.jsxs)("div",{className:"content-wrapper",children:[(0,t.jsx)(O.YearMonthFilter,{refreshData:h,group:i,dateOptions:m,className:"flex justify-center rounded-lg border border-gray-200 bg-white p-2 text-base shadow-sm"}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-3 md:w-auto md:flex-row md:gap-5",children:[(0,t.jsx)(u,{monthlyBudget:g,costList:n,isMobile:e}),(0,t.jsx)(l,{dateStr:new Date().toISOString(),costList:n,isMobile:e})]}),(0,t.jsxs)("div",{className:"flex w-full flex-col gap-3 md:w-auto md:flex-row md:gap-5",children:[(0,t.jsx)(j,{isMobile:e}),(0,t.jsx)(y,{data:n,loading:r,refreshData:x})]})]})}],22520)}]);